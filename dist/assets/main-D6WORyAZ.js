import{c as N,j as e,C as ce,B as g,P as se,T as x,a as Dn,b as Et,A as X,d as q,F as Jt,e as Kt,f as E,g as pe,G as L,h as xe,i as fe,k as Ee,I as M,l as Q,D as de,m as he,n as ue,o as me,S as Gt,p as Re,q as Oe,r as Rn,M as On,s as Xt,t as jt,u as yt,v as bt,w as Te,x as T,y as Ct,z as Tt,E as Fn,H as In,J as Pn,K as Ln,L as Mn,N as Qt,O as Nn,Q as Un}from"./mui-DKEqtbXx.js";import{c as zn,r as y,u as ie,d as wt,e as Bn,f as ne,N as Ae,a as Hn,B as _n}from"./react-Dys6rAWt.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var lt={},Dt=zn;lt.createRoot=Dt.createRoot,lt.hydrateRoot=Dt.hydrateRoot;const Wn=N(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle"),ge=N(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),$n=N([e.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),e.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")],"AdminPanelSettings"),ve=N(e.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),qn=N(e.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4"),Vn=N(e.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7"),Ge=N(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Xe=N([e.jsx("circle",{cx:"14.5",cy:"10.5",r:"1.25"},"0"),e.jsx("circle",{cx:"9.5",cy:"10.5",r:"1.25"},"1"),e.jsx("path",{d:"M22.94 12.66c.04-.21.06-.43.06-.66s-.02-.45-.06-.66c-.25-1.51-1.36-2.74-2.81-3.17-.53-1.12-1.28-2.1-2.19-2.91C16.36 3.85 14.28 3 12 3s-4.36.85-5.94 2.26c-.92.81-1.67 1.8-2.19 2.91-1.45.43-2.56 1.65-2.81 3.17-.04.21-.06.43-.06.66s.02.45.06.66c.25 1.51 1.36 2.74 2.81 3.17.52 1.11 1.27 2.09 2.17 2.89C7.62 20.14 9.71 21 12 21s4.38-.86 5.97-2.28c.9-.8 1.65-1.79 2.17-2.89 1.44-.43 2.55-1.65 2.8-3.17M19 14c-.1 0-.19-.02-.29-.03-.2.67-.49 1.29-.86 1.86C16.6 17.74 14.45 19 12 19s-4.6-1.26-5.85-3.17c-.37-.57-.66-1.19-.86-1.86-.1.01-.19.03-.29.03-1.1 0-2-.9-2-2s.9-2 2-2c.1 0 .19.02.29.03.2-.67.49-1.29.86-1.86C7.4 6.26 9.55 5 12 5s4.6 1.26 5.85 3.17c.37.57.66 1.19.86 1.86.1-.01.19-.03.29-.03 1.1 0 2 .9 2 2s-.9 2-2 2M7.5 14c.76 1.77 2.49 3 4.5 3s3.74-1.23 4.5-3z"},"2")],"ChildCare"),Jn=N(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),Yt=N(e.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),Kn=N(e.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard"),Se=N(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Gn=N(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),Ze=N(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Xn=N(e.jsx("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"ExitToApp"),Qn=N(e.jsx("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline"),ct=N(e.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image"),Zt=N(e.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"}),"Link"),dt=N(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),Rt=N(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),Yn=N(e.jsx("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print"),vt=N(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked"),Zn=N(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),Ce=N([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule"),er=N(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm-3.06 16L7.4 14.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41zM13 9V3.5L18.5 9z"}),"Task"),tr=N(e.jsx("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp"),nr=N(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),rr=N(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");function en(t,n){return function(){return t.apply(n,arguments)}}const{toString:sr}=Object.prototype,{getPrototypeOf:St}=Object,{iterator:et,toStringTag:tn}=Symbol,tt=(t=>n=>{const r=sr.call(n);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),oe=t=>(t=t.toLowerCase(),n=>tt(n)===t),nt=t=>n=>typeof n===t,{isArray:Fe}=Array,De=nt("undefined");function ze(t){return t!==null&&!De(t)&&t.constructor!==null&&!De(t.constructor)&&ee(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nn=oe("ArrayBuffer");function ir(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&nn(t.buffer),n}const or=nt("string"),ee=nt("function"),rn=nt("number"),Be=t=>t!==null&&typeof t=="object",ar=t=>t===!0||t===!1,Ve=t=>{if(tt(t)!=="object")return!1;const n=St(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(tn in t)&&!(et in t)},lr=t=>{if(!Be(t)||ze(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},cr=oe("Date"),dr=oe("File"),hr=oe("Blob"),ur=oe("FileList"),mr=t=>Be(t)&&ee(t.pipe),pr=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||ee(t.append)&&((n=tt(t))==="formdata"||n==="object"&&ee(t.toString)&&t.toString()==="[object FormData]"))},xr=oe("URLSearchParams"),[fr,gr,jr,yr]=["ReadableStream","Request","Response","Headers"].map(oe),br=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function He(t,n,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),Fe(t))for(s=0,i=t.length;s<i;s++)n.call(null,t[s],s,t);else{if(ze(t))return;const a=r?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let c;for(s=0;s<o;s++)c=a[s],n.call(null,t[c],c,t)}}function sn(t,n){if(ze(t))return null;n=n.toLowerCase();const r=Object.keys(t);let s=r.length,i;for(;s-- >0;)if(i=r[s],n===i.toLowerCase())return i;return null}const ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,on=t=>!De(t)&&t!==ye;function ht(){const{caseless:t,skipUndefined:n}=on(this)&&this||{},r={},s=(i,a)=>{const o=t&&sn(r,a)||a;Ve(r[o])&&Ve(i)?r[o]=ht(r[o],i):Ve(i)?r[o]=ht({},i):Fe(i)?r[o]=i.slice():(!n||!De(i))&&(r[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&He(arguments[i],s);return r}const Cr=(t,n,r,{allOwnKeys:s}={})=>(He(n,(i,a)=>{r&&ee(i)?t[a]=en(i,r):t[a]=i},{allOwnKeys:s}),t),wr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vr=(t,n,r,s)=>{t.prototype=Object.create(n.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),r&&Object.assign(t.prototype,r)},Sr=(t,n,r,s)=>{let i,a,o;const c={};if(n=n||{},t==null)return n;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!s||s(o,t,n))&&!c[o]&&(n[o]=t[o],c[o]=!0);t=r!==!1&&St(t)}while(t&&(!r||r(t,n))&&t!==Object.prototype);return n},kr=(t,n,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=n.length;const s=t.indexOf(n,r);return s!==-1&&s===r},Ar=t=>{if(!t)return null;if(Fe(t))return t;let n=t.length;if(!rn(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=t[n];return r},Er=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&St(Uint8Array)),Tr=(t,n)=>{const s=(t&&t[et]).call(t);let i;for(;(i=s.next())&&!i.done;){const a=i.value;n.call(t,a[0],a[1])}},Dr=(t,n)=>{let r;const s=[];for(;(r=t.exec(n))!==null;)s.push(r);return s},Rr=oe("HTMLFormElement"),Or=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,i){return s.toUpperCase()+i}),Ot=(({hasOwnProperty:t})=>(n,r)=>t.call(n,r))(Object.prototype),Fr=oe("RegExp"),an=(t,n)=>{const r=Object.getOwnPropertyDescriptors(t),s={};He(r,(i,a)=>{let o;(o=n(i,a,t))!==!1&&(s[a]=o||i)}),Object.defineProperties(t,s)},Ir=t=>{an(t,(n,r)=>{if(ee(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(ee(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Pr=(t,n)=>{const r={},s=i=>{i.forEach(a=>{r[a]=!0})};return Fe(t)?s(t):s(String(t).split(n)),r},Lr=()=>{},Mr=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function Nr(t){return!!(t&&ee(t.append)&&t[tn]==="FormData"&&t[et])}const Ur=t=>{const n=new Array(10),r=(s,i)=>{if(Be(s)){if(n.indexOf(s)>=0)return;if(ze(s))return s;if(!("toJSON"in s)){n[i]=s;const a=Fe(s)?[]:{};return He(s,(o,c)=>{const j=r(o,i+1);!De(j)&&(a[c]=j)}),n[i]=void 0,a}}return s};return r(t,0)},zr=oe("AsyncFunction"),Br=t=>t&&(Be(t)||ee(t))&&ee(t.then)&&ee(t.catch),ln=((t,n)=>t?setImmediate:n?((r,s)=>(ye.addEventListener("message",({source:i,data:a})=>{i===ye&&a===r&&s.length&&s.shift()()},!1),i=>{s.push(i),ye.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ee(ye.postMessage)),Hr=typeof queueMicrotask<"u"?queueMicrotask.bind(ye):typeof process<"u"&&process.nextTick||ln,_r=t=>t!=null&&ee(t[et]),h={isArray:Fe,isArrayBuffer:nn,isBuffer:ze,isFormData:pr,isArrayBufferView:ir,isString:or,isNumber:rn,isBoolean:ar,isObject:Be,isPlainObject:Ve,isEmptyObject:lr,isReadableStream:fr,isRequest:gr,isResponse:jr,isHeaders:yr,isUndefined:De,isDate:cr,isFile:dr,isBlob:hr,isRegExp:Fr,isFunction:ee,isStream:mr,isURLSearchParams:xr,isTypedArray:Er,isFileList:ur,forEach:He,merge:ht,extend:Cr,trim:br,stripBOM:wr,inherits:vr,toFlatObject:Sr,kindOf:tt,kindOfTest:oe,endsWith:kr,toArray:Ar,forEachEntry:Tr,matchAll:Dr,isHTMLForm:Rr,hasOwnProperty:Ot,hasOwnProp:Ot,reduceDescriptors:an,freezeMethods:Ir,toObjectSet:Pr,toCamelCase:Or,noop:Lr,toFiniteNumber:Mr,findKey:sn,global:ye,isContextDefined:on,isSpecCompliantForm:Nr,toJSONObject:Ur,isAsyncFn:zr,isThenable:Br,setImmediate:ln,asap:Hr,isIterable:_r};function D(t,n,r,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}h.inherits(D,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:h.toJSONObject(this.config),code:this.code,status:this.status}}});const cn=D.prototype,dn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{dn[t]={value:t}});Object.defineProperties(D,dn);Object.defineProperty(cn,"isAxiosError",{value:!0});D.from=(t,n,r,s,i,a)=>{const o=Object.create(cn);h.toFlatObject(t,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",j=n==null&&t?t.code:n;return D.call(o,c,j,r,s,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",a&&Object.assign(o,a),o};const Wr=null;function ut(t){return h.isPlainObject(t)||h.isArray(t)}function hn(t){return h.endsWith(t,"[]")?t.slice(0,-2):t}function Ft(t,n,r){return t?t.concat(n).map(function(i,a){return i=hn(i),!r&&a?"["+i+"]":i}).join(r?".":""):n}function $r(t){return h.isArray(t)&&!t.some(ut)}const qr=h.toFlatObject(h,{},null,function(n){return/^is[A-Z]/.test(n)});function rt(t,n,r){if(!h.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,r=h.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,d){return!h.isUndefined(d[f])});const s=r.metaTokens,i=r.visitor||l,a=r.dots,o=r.indexes,j=(r.Blob||typeof Blob<"u"&&Blob)&&h.isSpecCompliantForm(n);if(!h.isFunction(i))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(h.isDate(m))return m.toISOString();if(h.isBoolean(m))return m.toString();if(!j&&h.isBlob(m))throw new D("Blob is not supported. Use a Buffer instead.");return h.isArrayBuffer(m)||h.isTypedArray(m)?j&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function l(m,f,d){let b=m;if(m&&!d&&typeof m=="object"){if(h.endsWith(f,"{}"))f=s?f:f.slice(0,-2),m=JSON.stringify(m);else if(h.isArray(m)&&$r(m)||(h.isFileList(m)||h.endsWith(f,"[]"))&&(b=h.toArray(m)))return f=hn(f),b.forEach(function(k,I){!(h.isUndefined(k)||k===null)&&n.append(o===!0?Ft([f],I,a):o===null?f:f+"[]",u(k))}),!1}return ut(m)?!0:(n.append(Ft(d,f,a),u(m)),!1)}const p=[],v=Object.assign(qr,{defaultVisitor:l,convertValue:u,isVisitable:ut});function S(m,f){if(!h.isUndefined(m)){if(p.indexOf(m)!==-1)throw Error("Circular reference detected in "+f.join("."));p.push(m),h.forEach(m,function(b,R){(!(h.isUndefined(b)||b===null)&&i.call(n,b,h.isString(R)?R.trim():R,f,v))===!0&&S(b,f?f.concat(R):[R])}),p.pop()}}if(!h.isObject(t))throw new TypeError("data must be an object");return S(t),n}function It(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function kt(t,n){this._pairs=[],t&&rt(t,this,n)}const un=kt.prototype;un.append=function(n,r){this._pairs.push([n,r])};un.toString=function(n){const r=n?function(s){return n.call(this,s,It)}:It;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Vr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mn(t,n,r){if(!n)return t;const s=r&&r.encode||Vr;h.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(n,r):a=h.isURLSearchParams(n)?n.toString():new kt(n,r).toString(s),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class Pt{constructor(){this.handlers=[]}use(n,r,s){return this.handlers.push({fulfilled:n,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){h.forEach(this.handlers,function(s){s!==null&&n(s)})}}const pn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jr=typeof URLSearchParams<"u"?URLSearchParams:kt,Kr=typeof FormData<"u"?FormData:null,Gr=typeof Blob<"u"?Blob:null,Xr={isBrowser:!0,classes:{URLSearchParams:Jr,FormData:Kr,Blob:Gr},protocols:["http","https","file","blob","url","data"]},At=typeof window<"u"&&typeof document<"u",mt=typeof navigator=="object"&&navigator||void 0,Qr=At&&(!mt||["ReactNative","NativeScript","NS"].indexOf(mt.product)<0),Yr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Zr=At&&window.location.href||"http://localhost",es=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:At,hasStandardBrowserEnv:Qr,hasStandardBrowserWebWorkerEnv:Yr,navigator:mt,origin:Zr},Symbol.toStringTag,{value:"Module"})),G={...es,...Xr};function ts(t,n){return rt(t,new G.classes.URLSearchParams,{visitor:function(r,s,i,a){return G.isNode&&h.isBuffer(r)?(this.append(s,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...n})}function ns(t){return h.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function rs(t){const n={},r=Object.keys(t);let s;const i=r.length;let a;for(s=0;s<i;s++)a=r[s],n[a]=t[a];return n}function xn(t){function n(r,s,i,a){let o=r[a++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),j=a>=r.length;return o=!o&&h.isArray(i)?i.length:o,j?(h.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!c):((!i[o]||!h.isObject(i[o]))&&(i[o]=[]),n(r,s,i[o],a)&&h.isArray(i[o])&&(i[o]=rs(i[o])),!c)}if(h.isFormData(t)&&h.isFunction(t.entries)){const r={};return h.forEachEntry(t,(s,i)=>{n(ns(s),i,r,0)}),r}return null}function ss(t,n,r){if(h.isString(t))try{return(n||JSON.parse)(t),h.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const _e={transitional:pn,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const s=r.getContentType()||"",i=s.indexOf("application/json")>-1,a=h.isObject(n);if(a&&h.isHTMLForm(n)&&(n=new FormData(n)),h.isFormData(n))return i?JSON.stringify(xn(n)):n;if(h.isArrayBuffer(n)||h.isBuffer(n)||h.isStream(n)||h.isFile(n)||h.isBlob(n)||h.isReadableStream(n))return n;if(h.isArrayBufferView(n))return n.buffer;if(h.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let c;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return ts(n,this.formSerializer).toString();if((c=h.isFileList(n))||s.indexOf("multipart/form-data")>-1){const j=this.env&&this.env.FormData;return rt(c?{"files[]":n}:n,j&&new j,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),ss(n)):n}],transformResponse:[function(n){const r=this.transitional||_e.transitional,s=r&&r.forcedJSONParsing,i=this.responseType==="json";if(h.isResponse(n)||h.isReadableStream(n))return n;if(n&&h.isString(n)&&(s&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(n,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?D.from(c,D.ERR_BAD_RESPONSE,this,null,this.response):c}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:G.classes.FormData,Blob:G.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};h.forEach(["delete","get","head","post","put","patch"],t=>{_e.headers[t]={}});const is=h.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),os=t=>{const n={};let r,s,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!r||n[r]&&is[r])&&(r==="set-cookie"?n[r]?n[r].push(s):n[r]=[s]:n[r]=n[r]?n[r]+", "+s:s)}),n},Lt=Symbol("internals");function Ue(t){return t&&String(t).trim().toLowerCase()}function Je(t){return t===!1||t==null?t:h.isArray(t)?t.map(Je):String(t)}function as(t){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)n[s[1]]=s[2];return n}const ls=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function it(t,n,r,s,i){if(h.isFunction(s))return s.call(this,n,r);if(i&&(n=r),!!h.isString(n)){if(h.isString(s))return n.indexOf(s)!==-1;if(h.isRegExp(s))return s.test(n)}}function cs(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,s)=>r.toUpperCase()+s)}function ds(t,n){const r=h.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(i,a,o){return this[s].call(this,n,i,a,o)},configurable:!0})})}let te=class{constructor(n){n&&this.set(n)}set(n,r,s){const i=this;function a(c,j,u){const l=Ue(j);if(!l)throw new Error("header name must be a non-empty string");const p=h.findKey(i,l);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||j]=Je(c))}const o=(c,j)=>h.forEach(c,(u,l)=>a(u,l,j));if(h.isPlainObject(n)||n instanceof this.constructor)o(n,r);else if(h.isString(n)&&(n=n.trim())&&!ls(n))o(os(n),r);else if(h.isObject(n)&&h.isIterable(n)){let c={},j,u;for(const l of n){if(!h.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[u=l[0]]=(j=c[u])?h.isArray(j)?[...j,l[1]]:[j,l[1]]:l[1]}o(c,r)}else n!=null&&a(r,n,s);return this}get(n,r){if(n=Ue(n),n){const s=h.findKey(this,n);if(s){const i=this[s];if(!r)return i;if(r===!0)return as(i);if(h.isFunction(r))return r.call(this,i,s);if(h.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=Ue(n),n){const s=h.findKey(this,n);return!!(s&&this[s]!==void 0&&(!r||it(this,this[s],s,r)))}return!1}delete(n,r){const s=this;let i=!1;function a(o){if(o=Ue(o),o){const c=h.findKey(s,o);c&&(!r||it(s,s[c],c,r))&&(delete s[c],i=!0)}}return h.isArray(n)?n.forEach(a):a(n),i}clear(n){const r=Object.keys(this);let s=r.length,i=!1;for(;s--;){const a=r[s];(!n||it(this,this[a],a,n,!0))&&(delete this[a],i=!0)}return i}normalize(n){const r=this,s={};return h.forEach(this,(i,a)=>{const o=h.findKey(s,a);if(o){r[o]=Je(i),delete r[a];return}const c=n?cs(a):String(a).trim();c!==a&&delete r[a],r[c]=Je(i),s[c]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return h.forEach(this,(s,i)=>{s!=null&&s!==!1&&(r[i]=n&&h.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const s=new this(n);return r.forEach(i=>s.set(i)),s}static accessor(n){const s=(this[Lt]=this[Lt]={accessors:{}}).accessors,i=this.prototype;function a(o){const c=Ue(o);s[c]||(ds(i,o),s[c]=!0)}return h.isArray(n)?n.forEach(a):a(n),this}};te.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);h.reduceDescriptors(te.prototype,({value:t},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(s){this[r]=s}}});h.freezeMethods(te);function ot(t,n){const r=this||_e,s=n||r,i=te.from(s.headers);let a=s.data;return h.forEach(t,function(c){a=c.call(r,a,i.normalize(),n?n.status:void 0)}),i.normalize(),a}function fn(t){return!!(t&&t.__CANCEL__)}function Ie(t,n,r){D.call(this,t??"canceled",D.ERR_CANCELED,n,r),this.name="CanceledError"}h.inherits(Ie,D,{__CANCEL__:!0});function gn(t,n,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):n(new D("Request failed with status code "+r.status,[D.ERR_BAD_REQUEST,D.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function hs(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function us(t,n){t=t||10;const r=new Array(t),s=new Array(t);let i=0,a=0,o;return n=n!==void 0?n:1e3,function(j){const u=Date.now(),l=s[a];o||(o=u),r[i]=j,s[i]=u;let p=a,v=0;for(;p!==i;)v+=r[p++],p=p%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),u-o<n)return;const S=l&&u-l;return S?Math.round(v*1e3/S):void 0}}function ms(t,n){let r=0,s=1e3/n,i,a;const o=(u,l=Date.now())=>{r=l,i=null,a&&(clearTimeout(a),a=null),t(...u)};return[(...u)=>{const l=Date.now(),p=l-r;p>=s?o(u,l):(i=u,a||(a=setTimeout(()=>{a=null,o(i)},s-p)))},()=>i&&o(i)]}const Qe=(t,n,r=3)=>{let s=0;const i=us(50,250);return ms(a=>{const o=a.loaded,c=a.lengthComputable?a.total:void 0,j=o-s,u=i(j),l=o<=c;s=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:j,rate:u||void 0,estimated:u&&c&&l?(c-o)/u:void 0,event:a,lengthComputable:c!=null,[n?"download":"upload"]:!0};t(p)},r)},Mt=(t,n)=>{const r=t!=null;return[s=>n[0]({lengthComputable:r,total:t,loaded:s}),n[1]]},Nt=t=>(...n)=>h.asap(()=>t(...n)),ps=G.hasStandardBrowserEnv?((t,n)=>r=>(r=new URL(r,G.origin),t.protocol===r.protocol&&t.host===r.host&&(n||t.port===r.port)))(new URL(G.origin),G.navigator&&/(msie|trident)/i.test(G.navigator.userAgent)):()=>!0,xs=G.hasStandardBrowserEnv?{write(t,n,r,s,i,a){const o=[t+"="+encodeURIComponent(n)];h.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),h.isString(s)&&o.push("path="+s),h.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fs(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gs(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function jn(t,n,r){let s=!fs(n);return t&&(s||r==!1)?gs(t,n):n}const Ut=t=>t instanceof te?{...t}:t;function we(t,n){n=n||{};const r={};function s(u,l,p,v){return h.isPlainObject(u)&&h.isPlainObject(l)?h.merge.call({caseless:v},u,l):h.isPlainObject(l)?h.merge({},l):h.isArray(l)?l.slice():l}function i(u,l,p,v){if(h.isUndefined(l)){if(!h.isUndefined(u))return s(void 0,u,p,v)}else return s(u,l,p,v)}function a(u,l){if(!h.isUndefined(l))return s(void 0,l)}function o(u,l){if(h.isUndefined(l)){if(!h.isUndefined(u))return s(void 0,u)}else return s(void 0,l)}function c(u,l,p){if(p in n)return s(u,l);if(p in t)return s(void 0,u)}const j={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,l,p)=>i(Ut(u),Ut(l),p,!0)};return h.forEach(Object.keys({...t,...n}),function(l){const p=j[l]||i,v=p(t[l],n[l],l);h.isUndefined(v)&&p!==c||(r[l]=v)}),r}const yn=t=>{const n=we({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:c}=n;if(n.headers=o=te.from(o),n.url=mn(jn(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),h.isFormData(r)){if(G.hasStandardBrowserEnv||G.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(h.isFunction(r.getHeaders)){const j=r.getHeaders(),u=["content-type","content-length"];Object.entries(j).forEach(([l,p])=>{u.includes(l.toLowerCase())&&o.set(l,p)})}}if(G.hasStandardBrowserEnv&&(s&&h.isFunction(s)&&(s=s(n)),s||s!==!1&&ps(n.url))){const j=i&&a&&xs.read(a);j&&o.set(i,j)}return n},js=typeof XMLHttpRequest<"u",ys=js&&function(t){return new Promise(function(r,s){const i=yn(t);let a=i.data;const o=te.from(i.headers).normalize();let{responseType:c,onUploadProgress:j,onDownloadProgress:u}=i,l,p,v,S,m;function f(){S&&S(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let d=new XMLHttpRequest;d.open(i.method.toUpperCase(),i.url,!0),d.timeout=i.timeout;function b(){if(!d)return;const k=te.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),U={data:!c||c==="text"||c==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:k,config:t,request:d};gn(function(H){r(H),f()},function(H){s(H),f()},U),d=null}"onloadend"in d?d.onloadend=b:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(b)},d.onabort=function(){d&&(s(new D("Request aborted",D.ECONNABORTED,t,d)),d=null)},d.onerror=function(I){const U=I&&I.message?I.message:"Network Error",K=new D(U,D.ERR_NETWORK,t,d);K.event=I||null,s(K),d=null},d.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const U=i.transitional||pn;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),s(new D(I,U.clarifyTimeoutError?D.ETIMEDOUT:D.ECONNABORTED,t,d)),d=null},a===void 0&&o.setContentType(null),"setRequestHeader"in d&&h.forEach(o.toJSON(),function(I,U){d.setRequestHeader(U,I)}),h.isUndefined(i.withCredentials)||(d.withCredentials=!!i.withCredentials),c&&c!=="json"&&(d.responseType=i.responseType),u&&([v,m]=Qe(u,!0),d.addEventListener("progress",v)),j&&d.upload&&([p,S]=Qe(j),d.upload.addEventListener("progress",p),d.upload.addEventListener("loadend",S)),(i.cancelToken||i.signal)&&(l=k=>{d&&(s(!k||k.type?new Ie(null,t,d):k),d.abort(),d=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const R=hs(i.url);if(R&&G.protocols.indexOf(R)===-1){s(new D("Unsupported protocol "+R+":",D.ERR_BAD_REQUEST,t));return}d.send(a||null)})},bs=(t,n)=>{const{length:r}=t=t?t.filter(Boolean):[];if(n||r){let s=new AbortController,i;const a=function(u){if(!i){i=!0,c();const l=u instanceof Error?u:this.reason;s.abort(l instanceof D?l:new Ie(l instanceof Error?l.message:l))}};let o=n&&setTimeout(()=>{o=null,a(new D(`timeout ${n} of ms exceeded`,D.ETIMEDOUT))},n);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:j}=s;return j.unsubscribe=()=>h.asap(c),j}},Cs=function*(t,n){let r=t.byteLength;if(r<n){yield t;return}let s=0,i;for(;s<r;)i=s+n,yield t.slice(s,i),s=i},ws=async function*(t,n){for await(const r of vs(t))yield*Cs(r,n)},vs=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:r,value:s}=await n.read();if(r)break;yield s}}finally{await n.cancel()}},zt=(t,n,r,s)=>{const i=ws(t,n);let a=0,o,c=j=>{o||(o=!0,s&&s(j))};return new ReadableStream({async pull(j){try{const{done:u,value:l}=await i.next();if(u){c(),j.close();return}let p=l.byteLength;if(r){let v=a+=p;r(v)}j.enqueue(new Uint8Array(l))}catch(u){throw c(u),u}},cancel(j){return c(j),i.return()}},{highWaterMark:2})},Bt=64*1024,{isFunction:qe}=h,Ss=(({Request:t,Response:n})=>({Request:t,Response:n}))(h.global),{ReadableStream:Ht,TextEncoder:_t}=h.global,Wt=(t,...n)=>{try{return!!t(...n)}catch{return!1}},ks=t=>{t=h.merge.call({skipUndefined:!0},Ss,t);const{fetch:n,Request:r,Response:s}=t,i=n?qe(n):typeof fetch=="function",a=qe(r),o=qe(s);if(!i)return!1;const c=i&&qe(Ht),j=i&&(typeof _t=="function"?(m=>f=>m.encode(f))(new _t):async m=>new Uint8Array(await new r(m).arrayBuffer())),u=a&&c&&Wt(()=>{let m=!1;const f=new r(G.origin,{body:new Ht,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!f}),l=o&&c&&Wt(()=>h.isReadableStream(new s("").body)),p={stream:l&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!p[m]&&(p[m]=(f,d)=>{let b=f&&f[m];if(b)return b.call(f);throw new D(`Response type '${m}' is not supported`,D.ERR_NOT_SUPPORT,d)})});const v=async m=>{if(m==null)return 0;if(h.isBlob(m))return m.size;if(h.isSpecCompliantForm(m))return(await new r(G.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(h.isArrayBufferView(m)||h.isArrayBuffer(m))return m.byteLength;if(h.isURLSearchParams(m)&&(m=m+""),h.isString(m))return(await j(m)).byteLength},S=async(m,f)=>{const d=h.toFiniteNumber(m.getContentLength());return d??v(f)};return async m=>{let{url:f,method:d,data:b,signal:R,cancelToken:k,timeout:I,onDownloadProgress:U,onUploadProgress:K,responseType:H,headers:Z,withCredentials:W="same-origin",fetchOptions:A}=yn(m),z=n||fetch;H=H?(H+"").toLowerCase():"text";let w=bs([R,k&&k.toAbortSignal()],I),O=null;const P=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let re;try{if(K&&u&&d!=="get"&&d!=="head"&&(re=await S(Z,b))!==0){let ae=new r(f,{method:"POST",body:b,duplex:"half"}),je;if(h.isFormData(b)&&(je=ae.headers.get("content-type"))&&Z.setContentType(je),ae.body){const[Ne,ke]=Mt(re,Qe(Nt(K)));b=zt(ae.body,Bt,Ne,ke)}}h.isString(W)||(W=W?"include":"omit");const V=a&&"credentials"in r.prototype,$={...A,signal:w,method:d.toUpperCase(),headers:Z.normalize().toJSON(),body:b,duplex:"half",credentials:V?W:void 0};O=a&&new r(f,$);let J=await(a?z(O,A):z(f,$));const Le=l&&(H==="stream"||H==="response");if(l&&(U||Le&&P)){const ae={};["status","statusText","headers"].forEach($e=>{ae[$e]=J[$e]});const je=h.toFiniteNumber(J.headers.get("content-length")),[Ne,ke]=U&&Mt(je,Qe(Nt(U),!0))||[];J=new s(zt(J.body,Bt,Ne,()=>{ke&&ke(),P&&P()}),ae)}H=H||"text";let Me=await p[h.findKey(p,H)||"text"](J,m);return!Le&&P&&P(),await new Promise((ae,je)=>{gn(ae,je,{data:Me,headers:te.from(J.headers),status:J.status,statusText:J.statusText,config:m,request:O})})}catch(V){throw P&&P(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new D("Network Error",D.ERR_NETWORK,m,O),{cause:V.cause||V}):D.from(V,V&&V.code,m,O)}}},As=new Map,bn=t=>{let n=t?t.env:{};const{fetch:r,Request:s,Response:i}=n,a=[s,i,r];let o=a.length,c=o,j,u,l=As;for(;c--;)j=a[c],u=l.get(j),u===void 0&&l.set(j,u=c?new Map:ks(n)),l=u;return u};bn();const pt={http:Wr,xhr:ys,fetch:{get:bn}};h.forEach(pt,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const $t=t=>`- ${t}`,Es=t=>h.isFunction(t)||t===null||t===!1,Cn={getAdapter:(t,n)=>{t=h.isArray(t)?t:[t];const{length:r}=t;let s,i;const a={};for(let o=0;o<r;o++){s=t[o];let c;if(i=s,!Es(s)&&(i=pt[(c=String(s)).toLowerCase()],i===void 0))throw new D(`Unknown adapter '${c}'`);if(i&&(h.isFunction(i)||(i=i.get(n))))break;a[c||"#"+o]=i}if(!i){const o=Object.entries(a).map(([j,u])=>`adapter ${j} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=r?o.length>1?`since :
`+o.map($t).join(`
`):" "+$t(o[0]):"as no adapter specified";throw new D("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:pt};function at(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ie(null,t)}function qt(t){return at(t),t.headers=te.from(t.headers),t.data=ot.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Cn.getAdapter(t.adapter||_e.adapter,t)(t).then(function(s){return at(t),s.data=ot.call(t,t.transformResponse,s),s.headers=te.from(s.headers),s},function(s){return fn(s)||(at(t),s&&s.response&&(s.response.data=ot.call(t,t.transformResponse,s.response),s.response.headers=te.from(s.response.headers))),Promise.reject(s)})}const wn="1.12.2",st={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{st[t]=function(s){return typeof s===t||"a"+(n<1?"n ":" ")+t}});const Vt={};st.transitional=function(n,r,s){function i(a,o){return"[Axios v"+wn+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,c)=>{if(n===!1)throw new D(i(o," has been removed"+(r?" in "+r:"")),D.ERR_DEPRECATED);return r&&!Vt[o]&&(Vt[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(a,o,c):!0}};st.spelling=function(n){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${n}`),!0)};function Ts(t,n,r){if(typeof t!="object")throw new D("options must be an object",D.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const a=s[i],o=n[a];if(o){const c=t[a],j=c===void 0||o(c,a,t);if(j!==!0)throw new D("option "+a+" must be "+j,D.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new D("Unknown option "+a,D.ERR_BAD_OPTION)}}const Ke={assertOptions:Ts,validators:st},le=Ke.validators;let be=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Pt,response:new Pt}}async request(n,r){try{return await this._request(n,r)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=we(this.defaults,r);const{transitional:s,paramsSerializer:i,headers:a}=r;s!==void 0&&Ke.assertOptions(s,{silentJSONParsing:le.transitional(le.boolean),forcedJSONParsing:le.transitional(le.boolean),clarifyTimeoutError:le.transitional(le.boolean)},!1),i!=null&&(h.isFunction(i)?r.paramsSerializer={serialize:i}:Ke.assertOptions(i,{encode:le.function,serialize:le.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ke.assertOptions(r,{baseUrl:le.spelling("baseURL"),withXsrfToken:le.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&h.merge(a.common,a[r.method]);a&&h.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),r.headers=te.concat(o,a);const c=[];let j=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(j=j&&f.synchronous,c.unshift(f.fulfilled,f.rejected))});const u=[];this.interceptors.response.forEach(function(f){u.push(f.fulfilled,f.rejected)});let l,p=0,v;if(!j){const m=[qt.bind(this),void 0];for(m.unshift(...c),m.push(...u),v=m.length,l=Promise.resolve(r);p<v;)l=l.then(m[p++],m[p++]);return l}v=c.length;let S=r;for(;p<v;){const m=c[p++],f=c[p++];try{S=m(S)}catch(d){f.call(this,d);break}}try{l=qt.call(this,S)}catch(m){return Promise.reject(m)}for(p=0,v=u.length;p<v;)l=l.then(u[p++],u[p++]);return l}getUri(n){n=we(this.defaults,n);const r=jn(n.baseURL,n.url,n.allowAbsoluteUrls);return mn(r,n.params,n.paramsSerializer)}};h.forEach(["delete","get","head","options"],function(n){be.prototype[n]=function(r,s){return this.request(we(s||{},{method:n,url:r,data:(s||{}).data}))}});h.forEach(["post","put","patch"],function(n){function r(s){return function(a,o,c){return this.request(we(c||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}be.prototype[n]=r(),be.prototype[n+"Form"]=r(!0)});let Ds=class vn{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(c=>{s.subscribe(c),a=c}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},n(function(a,o,c){s.reason||(s.reason=new Ie(a,o,c),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=s=>{n.abort(s)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new vn(function(i){n=i}),cancel:n}}};function Rs(t){return function(r){return t.apply(null,r)}}function Os(t){return h.isObject(t)&&t.isAxiosError===!0}const xt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xt).forEach(([t,n])=>{xt[n]=t});function Sn(t){const n=new be(t),r=en(be.prototype.request,n);return h.extend(r,be.prototype,n,{allOwnKeys:!0}),h.extend(r,n,null,{allOwnKeys:!0}),r.create=function(i){return Sn(we(t,i))},r}const B=Sn(_e);B.Axios=be;B.CanceledError=Ie;B.CancelToken=Ds;B.isCancel=fn;B.VERSION=wn;B.toFormData=rt;B.AxiosError=D;B.Cancel=B.CanceledError;B.all=function(n){return Promise.all(n)};B.spread=Rs;B.isAxiosError=Os;B.mergeConfig=we;B.AxiosHeaders=te;B.formToJSON=t=>xn(h.isHTMLForm(t)?new FormData(t):t);B.getAdapter=Cn.getAdapter;B.HttpStatusCode=xt;B.default=B;const{Axios:ni,AxiosError:ri,CanceledError:si,isCancel:ii,CancelToken:oi,VERSION:ai,all:li,Cancel:ci,isAxiosError:di,spread:hi,toFormData:ui,AxiosHeaders:mi,HttpStatusCode:pi,formToJSON:xi,getAdapter:fi,mergeConfig:gi}=B,_=B.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});_.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(t.headers.Authorization=`Bearer ${n}`),t.data instanceof FormData&&delete t.headers["Content-Type"],t},t=>Promise.reject(t));_.interceptors.response.use(t=>t,t=>{var n;return((n=t.response)==null?void 0:n.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(t)});const kn=y.createContext(),We=()=>{const t=y.useContext(kn);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Fs=({children:t})=>{const[n,r]=y.useState(null),[s,i]=y.useState(!0);y.useEffect(()=>{localStorage.getItem("token")?a():i(!1)},[]);const a=async l=>{try{const p=await _.get("/auth/verify");r(p.data.user)}catch(p){console.error("Token verification failed:",p),localStorage.removeItem("token")}finally{i(!1)}},u={user:n,loading:s,login:async(l,p)=>{var v,S;try{const m=await _.post("/auth/login",{email:l,password:p}),{user:f,token:d}=m.data;return localStorage.setItem("token",d),r(f),{success:!0}}catch(m){return console.error("Login failed:",m),{success:!1,error:((S=(v=m.response)==null?void 0:v.data)==null?void 0:S.error)||"Login failed"}}},register:async(l,p,v,S=!0)=>{var m,f;try{const d=await _.post("/auth/register",{email:l,password:p,name:v,subscribeEmails:S}),{user:b,token:R}=d.data;return localStorage.setItem("token",R),r(b),{success:!0}}catch(d){return console.error("Registration failed:",d),{success:!1,error:((f=(m=d.response)==null?void 0:m.data)==null?void 0:f.error)||"Registration failed"}}},logout:()=>{localStorage.removeItem("token"),r(null)}};return e.jsx(kn.Provider,{value:u,children:t})},Is=()=>{const[t,n]=y.useState(0),[r,s]=y.useState({email:"",password:"",name:"",subscribeEmails:!0}),[i,a]=y.useState(""),[o,c]=y.useState(!1),{login:j,register:u}=We(),l=ie(),p=S=>{const{name:m,value:f,type:d,checked:b}=S.target;s({...r,[m]:d==="checkbox"?b:f}),i&&a("")},v=async S=>{S.preventDefault(),c(!0),a("");try{let m;t===0?m=await j(r.email,r.password):m=await u(r.email,r.password,r.name,r.subscribeEmails),m.success?l("/dashboard"):a(m.error)}catch{a("An unexpected error occurred")}finally{c(!1)}};return e.jsx(ce,{maxWidth:"sm",children:e.jsx(g,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(se,{elevation:3,sx:{p:4,width:"100%",maxWidth:400},children:[e.jsx(x,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Visual Schedule"}),e.jsx(x,{variant:"subtitle1",gutterBottom:!0,align:"center",color:"text.secondary",children:"Create visual schedules for your children"}),e.jsxs(Dn,{value:t,onChange:(S,m)=>n(m),centered:!0,sx:{mb:3},children:[e.jsx(Et,{label:"Login"}),e.jsx(Et,{label:"Sign Up"})]}),i&&e.jsx(X,{severity:"error",sx:{mb:2},children:i}),e.jsxs(g,{component:"form",onSubmit:v,children:[t===1&&e.jsx(q,{fullWidth:!0,label:"Name",name:"name",value:r.name,onChange:p,margin:"normal",required:!0}),e.jsx(q,{fullWidth:!0,label:"Email",name:"email",type:"email",value:r.email,onChange:p,margin:"normal",required:!0}),e.jsx(q,{fullWidth:!0,label:"Password",name:"password",type:"password",value:r.password,onChange:p,margin:"normal",required:!0,helperText:t===1?"Password must be at least 6 characters":""}),t===1&&e.jsx(Jt,{control:e.jsx(Kt,{checked:r.subscribeEmails,onChange:p,name:"subscribeEmails",color:"primary"}),label:"Receive emails from our site. We will never sell your information.",sx:{mt:1}}),e.jsx(E,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:o,sx:{mt:3,mb:2},children:o?"Loading...":t===0?"Login":"Sign Up"})]}),e.jsx(x,{variant:"body2",align:"center",color:"text.secondary",children:t===0?e.jsxs(e.Fragment,{children:["Don't have an account?"," ",e.jsx(x,{component:"span",variant:"body2",sx:{color:"primary.light",cursor:"pointer",textDecoration:"underline","&:hover":{color:"primary.main"}},onClick:()=>n(1),children:"Sign Up"})]}):e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx(x,{component:"span",variant:"body2",sx:{color:"primary.light",cursor:"pointer",textDecoration:"underline","&:hover":{color:"primary.main"}},onClick:()=>n(0),children:"Login"})]})})]})})})},Ps=()=>{const[t,n]=y.useState([]),[r,s]=y.useState([]),[i,a]=y.useState(!0),[o,c]=y.useState(""),{user:j,logout:u}=We(),l=ie();y.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0);const[f,d]=await Promise.all([_.get("/children"),_.get("/schedules")]);n(f.data.children||[]),s(d.data.schedules||[])}catch(f){console.error("Failed to fetch dashboard data:",f),c("Failed to load dashboard data")}finally{a(!1)}},v=()=>{l("/children")},S=f=>{l(`/children/${f}`)},m=f=>{l(`/schedules/${f}`)};return i?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(pe,{})}):e.jsxs(g,{children:[e.jsxs(g,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(g,{children:[e.jsxs(x,{variant:"h4",component:"h1",gutterBottom:!0,children:["Welcome back, ",j==null?void 0:j.name,"!"]}),e.jsx(x,{variant:"subtitle1",color:"text.secondary",children:"Manage your children's schedules and track their progress"})]}),e.jsx(E,{variant:"outlined",onClick:u,size:"small",children:"Logout"})]}),o&&e.jsx(X,{severity:"error",sx:{mb:3},children:o}),e.jsxs(L,{container:!0,spacing:3,children:[e.jsx(L,{item:!0,xs:12,md:6,children:e.jsx(xe,{children:e.jsxs(fe,{children:[e.jsxs(g,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(x,{variant:"h6",component:"h2",children:"Children"}),e.jsx(E,{startIcon:e.jsx(ge,{}),onClick:v,size:"small",children:"Add Child"}),e.jsx(Ee,{title:"Quick actions available here",children:e.jsx(M,{size:"small",sx:{color:"primary.light"},children:e.jsx(Qn,{fontSize:"small"})})})]}),t.length===0?e.jsxs(g,{textAlign:"center",py:3,children:[e.jsx(Rt,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"No children added yet. Start by adding your first child!"}),e.jsx(E,{variant:"outlined",size:"small",onClick:()=>l("/children"),startIcon:e.jsx(ge,{}),children:"Add Child"})]}):e.jsxs(g,{children:[t.slice(0,3).map(f=>e.jsxs(g,{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,onClick:()=>S(f.id),sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},borderRadius:1,px:1},children:[e.jsxs(g,{display:"flex",alignItems:"center",children:[e.jsx(Rt,{sx:{mr:2}}),e.jsx(x,{variant:"body1",children:f.name})]}),e.jsx(Q,{label:`${f._count.schedules} schedules`,size:"small",variant:"outlined"})]},f.id)),t.length>3&&e.jsxs(x,{variant:"body2",color:"text.secondary",textAlign:"center",mt:1,children:["And ",t.length-3," more..."]})]})]})})}),e.jsx(L,{item:!0,xs:12,md:6,children:e.jsx(xe,{children:e.jsxs(fe,{children:[e.jsx(x,{variant:"h6",component:"h2",gutterBottom:!0,children:"Recent Schedules"}),r.length===0?e.jsxs(g,{textAlign:"center",py:3,children:[e.jsx(Ce,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"No schedules created yet. Create your first schedule!"})]}):e.jsxs(g,{children:[r.slice(0,3).map(f=>e.jsxs(g,{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,onClick:()=>m(f.id),sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},borderRadius:1,px:1},children:[e.jsxs(g,{children:[e.jsx(x,{variant:"body1",children:f.title}),e.jsx(x,{variant:"body2",color:"text.secondary",children:f.child.name})]}),e.jsx(Q,{label:`${f.tasks.length} tasks`,size:"small",variant:"outlined"})]},f.id)),r.length>3&&e.jsxs(x,{variant:"body2",color:"text.secondary",textAlign:"center",mt:1,children:["And ",r.length-3," more..."]})]})]})})})]})]})},ft=t=>new Promise((n,r)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>n(s.result),s.onerror=i=>r(i)}),gt=t=>t&&t.type.startsWith("image/"),Ls=()=>{const[t,n]=y.useState([]),[r,s]=y.useState(!0),{user:i}=We(),a=ie(),[o,c]=y.useState(""),[j,u]=y.useState(!1),[l,p]=y.useState(null),[v,S]=y.useState(!1),[m,f]=y.useState(""),[d,b]=y.useState({name:"",avatar:"",avatarFile:null,color:"#1976d2"}),R=async A=>{const z=`${window.location.origin}/child/${A.magicToken}`;try{await navigator.clipboard.writeText(z),f(A.name),S(!0)}catch(w){console.error("Failed to copy URL:",w);const O=document.createElement("textarea");O.value=z,document.body.appendChild(O),O.select(),document.execCommand("copy"),document.body.removeChild(O),f(A.name),S(!0)}};y.useEffect(()=>{k()},[]);const k=async()=>{try{s(!0);const A=await _.get("/children");n(A.data.children||[])}catch(A){console.error("Failed to fetch children:",A),c("Failed to load children")}finally{s(!1)}},I=(A=null)=>{A?(p(A),b({name:A.name,avatar:A.avatar||"",avatarType:A.avatarType||null,color:A.color||"#1976d2"})):(p(null),b({name:"",avatar:"",avatarType:null,color:"#1976d2"})),u(!0)},U=()=>{u(!1),p(null),b({name:"",avatar:"",color:"#1976d2"})},K=async A=>{A.preventDefault();try{const z={name:d.name,avatar:d.avatar,avatarType:d.avatarType,color:d.color};l?await _.put(`/children/${l.id}`,z):await _.post("/children",z),U(),k()}catch(z){console.error("Failed to save child:",z),c("Failed to save child")}},H=async A=>{if(window.confirm("Are you sure you want to delete this child? This will also delete all their schedules."))try{await _.delete(`/children/${A}`),k()}catch(z){console.error("Failed to delete child:",z),c("Failed to delete child")}},Z=async A=>{const z=A.target.files[0];if(z){if(!gt(z)){c("Please select a valid image file");return}try{const w=await ft(z);b({...d,avatar:w,avatarType:"uploaded"})}catch(w){console.error("Error converting image:",w),c("Failed to process image")}}},W=A=>{b({...d,[A.target.name]:A.target.value})};return r?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(pe,{})}):e.jsxs(g,{children:[e.jsxs(g,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(M,{onClick:()=>a("/dashboard"),sx:{mr:2},children:e.jsx(ve,{})}),e.jsx(x,{variant:"h4",component:"h1",children:"Children"})]}),o&&e.jsx(X,{severity:"error",sx:{mb:3},children:o}),e.jsx(g,{display:"flex",justifyContent:"flex-end",mb:3,children:e.jsx(E,{variant:"contained",startIcon:e.jsx(ge,{}),onClick:()=>I(),sx:{bgcolor:"primary.light","&:hover":{bgcolor:"primary.main"}},children:"Add Child"})}),e.jsx(L,{container:!0,spacing:3,children:t.map(A=>e.jsx(L,{item:!0,xs:12,sm:6,md:4,children:e.jsx(xe,{children:e.jsxs(fe,{children:[e.jsxs(g,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[e.jsxs(g,{children:[e.jsx(x,{variant:"h6",component:"h2",gutterBottom:!0,children:A.name}),e.jsx(Q,{label:`${A._count.schedules} schedules`,size:"small",variant:"outlined"})]}),e.jsxs(g,{children:[e.jsx(M,{size:"small",onClick:()=>I(A),sx:{color:"primary.light"},children:e.jsx(Ze,{})}),e.jsx(M,{size:"small",color:"error",onClick:()=>H(A.id),children:e.jsx(Se,{})})]})]}),e.jsxs(g,{sx:{mt:2,p:2,bgcolor:"primary.light",borderRadius:1,color:"primary.contrastText"},children:[e.jsxs(g,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(Zt,{sx:{mr:1,fontSize:20}}),e.jsx(x,{variant:"body2",sx:{fontWeight:"bold"},children:"Magic Link:"})]}),e.jsxs(g,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(q,{value:`${window.location.origin}/child/${A.magicToken}`,size:"small",fullWidth:!0,InputProps:{readOnly:!0,sx:{bgcolor:"rgba(255,255,255,0.1)",color:"inherit"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(255,255,255,0.3)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.5)"}},fontSize:"0.7rem"}}),e.jsx(Ee,{title:"Copy magic link",children:e.jsx(M,{size:"small",sx:{color:"inherit","&:hover":{bgcolor:"rgba(255,255,255,0.1)"}},onClick:()=>R(A),children:e.jsx(Yt,{fontSize:"small"})})})]}),e.jsxs(x,{variant:"caption",sx:{mt:1,display:"block",opacity:.8},children:["Share with ",A.name," for independent access"]})]}),e.jsx(E,{variant:"outlined",fullWidth:!0,onClick:()=>a(`/children/${A.id}`),children:"View Details"})]})})},A.id))}),t.length===0&&e.jsxs(g,{textAlign:"center",py:6,children:[e.jsx(x,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No children added yet"}),e.jsx(x,{variant:"body2",color:"text.secondary",mb:3,children:"Start by adding your first child to create schedules for them"}),e.jsx(E,{variant:"contained",startIcon:e.jsx(ge,{}),onClick:()=>I(),sx:{bgcolor:"primary.light","&:hover":{bgcolor:"primary.main"}},children:"Add Your First Child"})]}),e.jsxs(de,{open:j,onClose:U,maxWidth:"sm",fullWidth:!0,children:[e.jsx(he,{children:l?"Edit Child":"Add New Child"}),e.jsxs(g,{component:"form",onSubmit:K,children:[e.jsxs(ue,{children:[e.jsx(q,{fullWidth:!0,label:"Name",name:"name",value:d.name,onChange:W,margin:"normal",required:!0}),e.jsx(q,{fullWidth:!0,label:"Avatar Image (optional)",type:"file",accept:"image/*",onChange:Z,margin:"normal",helperText:"Upload an image for this child's avatar",InputLabelProps:{shrink:!0}}),d.avatar&&e.jsx(g,{sx:{mt:1},children:e.jsx("img",{src:d.avatar,alt:"Avatar preview",style:{width:100,height:100,borderRadius:"50%",objectFit:"cover"}})}),e.jsx(q,{fullWidth:!0,label:"Theme Color (optional)",name:"color",type:"color",value:d.color,onChange:W,margin:"normal",helperText:"Choose a color theme for this child's schedules"})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:U,children:"Cancel"}),e.jsxs(E,{type:"submit",variant:"contained",children:[l?"Update":"Add"," Child"]})]})]})]}),e.jsx(Gt,{open:v,autoHideDuration:3e3,onClose:()=>S(!1),message:`Magic link for ${m} copied to clipboard!`})]})},Ms=()=>{const{id:t}=wt(),[n,r]=y.useState(null),[s,i]=y.useState(!0),[a,o]=y.useState(""),[c,j]=y.useState(!1),[u,l]=y.useState(!1),[p,v]=y.useState(null),[S,m]=y.useState(!1),[f,d]=y.useState({title:"",description:""}),b=ie();y.useEffect(()=>{R()},[t]);const R=async()=>{try{i(!0);const w=await _.get(`/children/${t}`);r(w.data.child)}catch(w){console.error("Failed to fetch child:",w),o("Failed to load child details")}finally{i(!1)}},k=()=>{d({title:"",description:""}),j(!0)},I=()=>{j(!1),d({title:"",description:""})},U=w=>{v(w),d({title:w.title,description:w.description||""}),l(!0)},K=()=>{l(!1),v(null),d({title:"",description:""})},H=async w=>{w.preventDefault();try{await _.put(`/schedules/${p.id}`,{title:f.title,description:f.description}),K(),R()}catch(O){console.error("Failed to rename schedule:",O),o("Failed to rename schedule")}},Z=async w=>{w.preventDefault();try{await _.post("/schedules",{title:f.title,description:f.description,childId:t}),I(),R()}catch(O){console.error("Failed to create schedule:",O),o("Failed to create schedule")}},W=w=>{d({...f,[w.target.name]:w.target.value})},A=async()=>{if(window.confirm(`Are you sure you want to delete ${n.name}? This will permanently delete all schedules and tasks for this child.`))try{await _.delete(`/children/${t}`),b("/children")}catch(w){console.error("Failed to delete child:",w),o("Failed to delete child")}},z=async()=>{const w=`${window.location.origin}/child/${n.magicToken}`;try{await navigator.clipboard.writeText(w),m(!0)}catch(O){console.error("Failed to copy URL:",O);const P=document.createElement("textarea");P.value=w,document.body.appendChild(P),P.select(),document.execCommand("copy"),document.body.removeChild(P),m(!0)}};return s?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(pe,{})}):n?e.jsxs(g,{children:[e.jsxs(g,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(M,{onClick:()=>b("/children"),sx:{mr:2},children:e.jsx(ve,{})}),e.jsxs(g,{flexGrow:1,children:[e.jsx(x,{variant:"h4",component:"h1",gutterBottom:!0,children:n.name}),e.jsxs(x,{variant:"subtitle1",color:"text.secondary",children:["Manage schedules and tasks for ",n.name]})]}),e.jsxs(g,{display:"flex",gap:2,children:[e.jsx(E,{variant:"contained",startIcon:e.jsx(ge,{}),onClick:k,sx:{bgcolor:"primary.light","&:hover":{bgcolor:"primary.main"}},children:"New Schedule"}),e.jsx(Ee,{title:`Delete ${n.name}`,children:e.jsx(M,{color:"error",onClick:A,sx:{bgcolor:"error.main",color:"white","&:hover":{bgcolor:"error.dark"}},children:e.jsx(Gn,{})})})]})]}),e.jsxs(se,{elevation:2,sx:{p:3,mb:3,bgcolor:"primary.light",color:"primary.contrastText"},children:[e.jsxs(g,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Zt,{sx:{mr:2,fontSize:28}}),e.jsxs(x,{variant:"h5",component:"h2",children:["Magic Link for ",n.name]})]}),e.jsxs(x,{variant:"body1",sx:{mb:2,opacity:.9},children:["Share this link with ",n.name," so they can access their schedules independently on any device!"]}),e.jsxs(g,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(q,{value:`${window.location.origin}/child/${n.magicToken}`,fullWidth:!0,size:"small",InputProps:{readOnly:!0,sx:{bgcolor:"rgba(255,255,255,0.1)",color:"inherit"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(255,255,255,0.3)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.5)"}}}}),e.jsx(Ee,{title:"Copy magic link",children:e.jsx(M,{onClick:z,sx:{bgcolor:"rgba(255,255,255,0.1)",color:"inherit","&:hover":{bgcolor:"rgba(255,255,255,0.2)"}},children:e.jsx(Yt,{})})})]})]}),a&&e.jsx(X,{severity:"error",sx:{mb:3},children:a}),n.schedules.length===0?e.jsxs(g,{textAlign:"center",py:6,children:[e.jsx(Ce,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(x,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No schedules yet"}),e.jsxs(x,{variant:"body2",color:"text.secondary",mb:3,children:["Create your first schedule for ",n.name]}),e.jsx(E,{variant:"contained",startIcon:e.jsx(ge,{}),onClick:k,sx:{bgcolor:"primary.light","&:hover":{bgcolor:"primary.main"}},children:"Create First Schedule"})]}):e.jsx(L,{container:!0,spacing:3,children:n.schedules.map(w=>e.jsx(L,{item:!0,xs:12,md:6,children:e.jsx(xe,{children:e.jsxs(fe,{children:[e.jsxs(g,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[e.jsxs(g,{flexGrow:1,children:[e.jsx(x,{variant:"h6",component:"h2",gutterBottom:!0,children:w.title}),w.description&&e.jsx(x,{variant:"body2",color:"text.secondary",mb:2,children:w.description}),e.jsx(Q,{label:`${w.tasks.length} tasks`,size:"small",variant:"outlined",sx:{mr:1}}),e.jsx(Q,{label:w.isActive?"Active":"Inactive",size:"small",color:w.isActive?"success":"default"})]}),e.jsxs(g,{children:[e.jsx(Ee,{title:"Rename schedule",children:e.jsx(M,{size:"small",onClick:()=>{setRenameSchedule(w),setNewScheduleName(w.title),U(w)},sx:{color:"primary.light"},children:e.jsx(Ze,{})})}),e.jsx(M,{size:"small",onClick:()=>b(`/schedules/${w.id}`),children:e.jsx(Ce,{})}),e.jsx(M,{size:"small",color:"error",onClick:()=>handleDeleteSchedule(w.id),children:e.jsx(Se,{})})]})]}),e.jsx(E,{variant:"outlined",fullWidth:!0,onClick:()=>b(`/schedules/${w.id}`),children:"View Schedule"})]})})},w.id))}),e.jsxs(de,{open:c,onClose:I,maxWidth:"sm",fullWidth:!0,children:[e.jsx(he,{children:"Create New Schedule"}),e.jsxs(g,{component:"form",onSubmit:Z,children:[e.jsxs(ue,{children:[e.jsx(q,{fullWidth:!0,label:"Schedule Title",name:"title",value:f.title,onChange:W,margin:"normal",required:!0,placeholder:"e.g., Morning Routine, Bedtime Routine"}),e.jsx(q,{fullWidth:!0,label:"Description (optional)",name:"description",value:f.description,onChange:W,margin:"normal",multiline:!0,rows:3,placeholder:"Describe what this schedule is for..."})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:I,children:"Cancel"}),e.jsx(E,{type:"submit",variant:"contained",children:"Create Schedule"})]})]})]}),e.jsxs(de,{open:u,onClose:K,maxWidth:"sm",fullWidth:!0,children:[e.jsx(he,{children:"Rename Schedule"}),e.jsxs(g,{component:"form",onSubmit:H,children:[e.jsxs(ue,{children:[e.jsx(q,{fullWidth:!0,label:"Schedule Title",name:"title",value:f.title,onChange:W,margin:"normal",required:!0,placeholder:"e.g., Morning Routine, Bedtime Routine"}),e.jsx(q,{fullWidth:!0,label:"Description (optional)",name:"description",value:f.description,onChange:W,margin:"normal",multiline:!0,rows:3,placeholder:"Describe what this schedule is for..."})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:K,children:"Cancel"}),e.jsx(E,{type:"submit",variant:"contained",children:"Rename Schedule"})]})]})]}),e.jsx(Gt,{open:S,autoHideDuration:3e3,onClose:()=>m(!1),message:"Magic link copied to clipboard!"})]}):e.jsxs(g,{children:[e.jsx(X,{severity:"error",children:"Child not found"}),e.jsx(E,{onClick:()=>b("/children"),sx:{mt:2},children:"Back to Children"})]})},Ns=()=>{const{id:t}=wt(),[n,r]=y.useState(null),[s,i]=y.useState(!0),[a,o]=y.useState(""),[c,j]=y.useState(!1),[u,l]=y.useState(!1),[p,v]=y.useState(null),[S,m]=y.useState([]),[f,d]=y.useState(null),[b,R]=y.useState({title:"",description:"",image:"",imageFile:null}),[k,I]=y.useState({title:"",description:"",image:"",imageFile:null}),U=ie(),{user:K}=We();y.useEffect(()=>{W(),H()},[t]),y.useEffect(()=>{K&&S.length===0&&H()},[K]);const H=async()=>{try{console.log(" Fetching predefined images...");const C=await _.get("/test/images");console.log(" Predefined images loaded:",C.data.images.length),m(C.data.images)}catch(C){console.error(" Failed to fetch predefined images:",C),m([])}},Z=C=>{d(C),R({...b,image:C.imageData,imageType:"predefined"})},W=async()=>{try{i(!0);const C=await _.get(`/schedules/${t}`);r(C.data.schedule)}catch(C){console.error("Failed to fetch schedule:",C),o("Failed to load schedule details")}finally{i(!1)}},A=()=>{R({title:"",description:"",image:"",imageFile:null,imageType:""}),j(!0)},z=()=>{j(!1),R({title:"",description:"",image:"",imageFile:null,imageType:""}),d(null)},w=async C=>{const F=C.target.files[0];if(F){if(!gt(F)){o("Please select a valid image file");return}try{const Y=await ft(F);R({...b,image:Y,imageType:"uploaded"})}catch(Y){console.error("Error converting image:",Y),o("Failed to process image")}}},O=C=>{v(C),I({title:C.title,description:C.description||"",image:C.image||"",imageType:C.imageType||null}),l(!0)},P=()=>{l(!1),v(null),I({title:"",description:"",image:"",imageType:null})},re=C=>{I({...k,[C.target.name]:C.target.value})},V=async C=>{const F=C.target.files[0];if(F){if(!gt(F)){o("Please select a valid image file");return}try{const Y=await ft(F);I({...k,image:Y,imageType:"uploaded"})}catch(Y){console.error("Error converting image:",Y),o("Failed to process image")}}},$=async C=>{C.preventDefault();try{await _.put(`/schedules/${t}/tasks/${p.id}`,{title:k.title,description:k.description,image:k.image,imageType:k.imageType}),P(),W()}catch(F){console.error("Failed to update task:",F),o("Failed to update task")}},J=async C=>{C.preventDefault();try{await _.post(`/schedules/${t}/tasks`,{title:b.title,description:b.description,image:b.image,imageType:b.imageType,order:n.tasks.length}),z(),W()}catch(F){console.error("Failed to create task:",F),o("Failed to create task")}},Le=C=>{R({...b,[C.target.name]:C.target.value})},Me=async(C,F)=>{try{await _.put(`/schedules/${t}/tasks/${C}`,F),W()}catch(Y){console.error("Failed to update task:",Y),o("Failed to update task")}},ae=C=>{const F=!C.isCompleted,Y={isCompleted:F,completedAt:F?new Date().toISOString():null,childMarkedDone:F,childMarkedAt:F?new Date().toISOString():null,parentConfirmed:F,parentConfirmedAt:F?new Date().toISOString():null};Me(C.id,Y)},je=C=>{const F=!C.childMarkedDone,Y={childMarkedDone:F,childMarkedAt:F?new Date().toISOString():null,isCompleted:F&&C.parentConfirmed,completedAt:F&&C.parentConfirmed?new Date().toISOString():null};Me(C.id,Y)},Ne=C=>{const F=!C.parentConfirmed,Y={parentConfirmed:F,parentConfirmedAt:F?new Date().toISOString():null,isCompleted:F&&C.childMarkedDone,completedAt:F&&C.childMarkedDone?new Date().toISOString():null};Me(C.id,Y)},ke=async C=>{if(window.confirm("Are you sure you want to delete this task?"))try{await _.delete(`/schedules/${t}/tasks/${C}`),W()}catch(F){console.error("Failed to delete task:",F),o("Failed to delete task")}},$e=()=>{window.print()},Tn=async()=>{if(window.confirm("Are you sure you want to reset this schedule? All task progress will be cleared."))try{await _.put(`/schedules/${t}/reset`),W()}catch(C){console.error("Failed to reset schedule:",C),o("Failed to reset schedule")}};return s?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(pe,{})}):n?e.jsxs(g,{children:[e.jsx("style",{children:`
          @media print {
            body {
              font-family: Arial, sans-serif;
              line-height: 1.4;
              color: #000;
              background: #fff !important;
            }
            
            .MuiPaper-root {
              box-shadow: none !important;
              background: #fff !important;
            }
            
            .MuiButton-root {
              display: none !important;
            }
            
            .MuiIconButton-root {
              display: none !important;
            }
            
            .MuiTabs-root {
              display: none !important;
            }
            
            .MuiAlert-root {
              display: none !important;
            }
            
            .print-header {
              text-align: center;
              margin-bottom: 30px;
              padding-bottom: 20px;
              border-bottom: 2px solid #000;
            }
            
            .print-task {
              display: flex;
              align-items: center;
              margin-bottom: 15px;
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 5px;
              page-break-inside: avoid;
            }
            
            .print-task-number {
              font-size: 18px;
              font-weight: bold;
              margin-right: 15px;
              min-width: 30px;
            }
            
            .print-task-content {
              flex: 1;
            }
            
            .print-task-title {
              font-size: 16px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            
            .print-task-description {
              font-size: 14px;
              color: #666;
              margin-bottom: 8px;
            }
            
            .print-task-image {
              width: 60px;
              height: 60px;
              object-fit: cover;
              border-radius: 4px;
              margin-left: 15px;
            }
            
            .print-footer {
              margin-top: 50px;
              text-align: center;
              font-size: 12px;
              color: #666;
              border-top: 1px solid #ccc;
              padding-top: 20px;
            }
            
            @page {
              margin: 0.5in;
              size: A4;
            }
          }
        `}),e.jsxs(g,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(M,{onClick:()=>U(`/children/${n.child.id}`),sx:{mr:2},children:e.jsx(ve,{})}),e.jsxs(g,{flexGrow:1,children:[e.jsx(x,{variant:"h4",component:"h1",gutterBottom:!0,children:n.title}),e.jsxs(x,{variant:"subtitle1",color:"text.secondary",children:[n.child.name,"'s Schedule"]})]}),e.jsxs(g,{display:"flex",gap:2,children:[e.jsx(E,{variant:"outlined",startIcon:e.jsx(Yn,{}),onClick:$e,sx:{"@media print":{display:"none"}},children:"Print Schedule"}),e.jsx(E,{variant:"outlined",color:"warning",startIcon:e.jsx(Zn,{}),onClick:Tn,children:"Reset Schedule"}),e.jsx(E,{variant:"contained",startIcon:e.jsx(ge,{}),onClick:A,sx:{bgcolor:"primary.light","&:hover":{bgcolor:"primary.main"}},children:"Add Task"})]})]}),a&&e.jsx(X,{severity:"error",sx:{mb:3},children:a}),n.description&&e.jsx(X,{severity:"info",sx:{mb:3},children:n.description}),e.jsxs(g,{className:"print-header",sx:{display:"none","@media print":{display:"block"}},children:[e.jsx(x,{variant:"h3",component:"h1",sx:{mb:1},children:n.title}),e.jsxs(x,{variant:"h5",sx:{color:"#666"},children:[n.child.name,"'s Daily Schedule"]}),n.description&&e.jsx(x,{variant:"body1",sx:{mt:2,fontStyle:"italic"},children:n.description})]}),e.jsx(L,{container:!0,spacing:2,children:n.tasks.map((C,F)=>e.jsxs(L,{item:!0,xs:12,children:[e.jsx(xe,{sx:{display:{xs:"block","@media print":{display:"none"}},backgroundColor:C.isCompleted?"success.light":"background.paper",opacity:C.isCompleted?.9:1,color:C.isCompleted?"success.contrastText":"text.primary"},children:e.jsxs(fe,{children:[e.jsxs(g,{display:"flex",alignItems:"center",mb:1,children:[e.jsxs(x,{variant:"h6",component:"span",sx:{mr:2},children:[F+1,"."]}),C.image&&e.jsx(g,{sx:{mr:2},children:e.jsx("img",{src:C.image,alt:C.title,style:{width:48,height:48,borderRadius:4,objectFit:"cover"}})}),e.jsx(Jt,{control:e.jsx(Kt,{checked:C.isCompleted,onChange:()=>ae(C),icon:e.jsx(vt,{}),checkedIcon:e.jsx(Ge,{})}),label:e.jsx(x,{variant:"h6",sx:{textDecoration:C.isCompleted?"line-through":"none"},children:C.title})}),e.jsxs(g,{ml:"auto",display:"flex",gap:1,children:[e.jsx(M,{size:"small",color:C.childMarkedDone?"success":"default",onClick:()=>je(C),title:"Child marks as done",children:e.jsx(tr,{})}),e.jsx(M,{size:"small",color:C.parentConfirmed?"primary":"default",onClick:()=>Ne(C),title:"Parent confirms completion",children:e.jsx(Ge,{})}),e.jsx(M,{size:"small",onClick:()=>O(C),sx:{color:"primary.light"},children:e.jsx(Ze,{})}),e.jsx(M,{size:"small",color:"error",onClick:()=>ke(C.id),children:e.jsx(Se,{})})]})]}),C.description&&e.jsx(x,{variant:"body2",color:"text.secondary",sx:{ml:4},children:C.description}),e.jsxs(g,{display:"flex",gap:1,mt:1,ml:4,children:[C.childMarkedDone&&e.jsx(Q,{label:"Child completed",size:"small",color:"warning",variant:"outlined"}),C.parentConfirmed&&e.jsx(Q,{label:"Parent confirmed",size:"small",color:"success",variant:"outlined"}),C.completedAt&&e.jsx(Q,{label:`Completed: ${new Date(C.completedAt).toLocaleTimeString()}`,size:"small",variant:"outlined"})]})]})}),e.jsxs(g,{className:"print-task",sx:{display:"none","@media print":{display:"flex"}},children:[e.jsxs(g,{className:"print-task-number",children:[F+1,"."]}),e.jsxs(g,{className:"print-task-content",children:[e.jsx(g,{className:"print-task-title",children:C.title}),C.description&&e.jsx(g,{className:"print-task-description",children:C.description})]}),C.image&&e.jsx("img",{src:C.image,alt:C.title,className:"print-task-image"})]})]},C.id))}),e.jsxs(g,{className:"print-footer",sx:{display:"none","@media print":{display:"block"}},children:[e.jsxs(x,{children:["Printed on ",new Date().toLocaleDateString()," at ",new Date().toLocaleTimeString()]}),e.jsxs(x,{sx:{mt:1},children:[n.child.name,"'s Daily Schedule - ",n.title]})]}),n.tasks.length===0&&e.jsxs(g,{textAlign:"center",py:6,children:[e.jsx(x,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No tasks in this schedule yet"}),e.jsxs(x,{variant:"body2",color:"text.secondary",mb:3,children:["Add tasks for ",n.child.name," to complete"]}),e.jsx(E,{variant:"contained",startIcon:e.jsx(ge,{}),onClick:A,sx:{bgcolor:"primary.light","&:hover":{bgcolor:"primary.main"}},children:"Add First Task"})]}),n.tasks.length===0&&e.jsx(g,{sx:{display:"none","@media print":{display:"block",textAlign:"center",mt:4}},children:e.jsx(x,{variant:"h5",sx:{color:"#666"},children:"No tasks have been added to this schedule yet."})}),e.jsxs(de,{open:c,onClose:z,maxWidth:"md",fullWidth:!0,children:[e.jsx(he,{children:"Add New Task"}),e.jsxs(g,{component:"form",onSubmit:J,children:[e.jsxs(ue,{children:[e.jsx(q,{fullWidth:!0,label:"Task Title",name:"title",value:b.title,onChange:Le,margin:"normal",required:!0,placeholder:"e.g., Brush teeth, Make bed, Eat breakfast"}),e.jsx(q,{fullWidth:!0,label:"Description (optional)",name:"description",value:b.description,onChange:Le,margin:"normal",multiline:!0,rows:3,placeholder:"Additional details about this task..."}),e.jsx(x,{variant:"h6",sx:{mt:3,mb:2},children:"Task Image (optional)"}),e.jsx(q,{fullWidth:!0,type:"file",accept:"image/*",onChange:w,margin:"normal",helperText:"Upload an image for this task",InputLabelProps:{shrink:!0}}),b.image&&e.jsx(g,{sx:{mt:1},children:e.jsx("img",{src:b.image,alt:"Task image preview",style:{width:100,height:100,borderRadius:4,objectFit:"cover"}})}),e.jsx(E,{variant:"outlined",sx:{mt:2},onClick:()=>R({...b,image:"",imageFile:null,imageType:""}),children:"Remove Image"}),S.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h6",sx:{mt:3,mb:2},children:"Or Choose from Predefined Images"}),e.jsx(g,{sx:{maxHeight:200,overflowY:"auto",border:1,borderColor:"divider",borderRadius:1,p:2},children:e.jsx(L,{container:!0,spacing:1,children:S.map(C=>e.jsx(L,{item:!0,xs:4,sm:3,children:e.jsxs(g,{sx:{cursor:"pointer",border:(f==null?void 0:f.id)===C.id?2:1,borderColor:(f==null?void 0:f.id)===C.id?"primary.main":"divider",borderRadius:1,p:1,textAlign:"center","&:hover":{borderColor:"primary.main",bgcolor:"primary.light"}},onClick:()=>Z(C),children:[e.jsx("img",{src:C.imageData,alt:C.name,style:{width:"100%",height:40,objectFit:"contain",borderRadius:4}}),e.jsx(x,{variant:"caption",sx:{display:"block",mt:.5,fontSize:"0.7rem"},children:C.name})]})},C.id))})})]})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:z,children:"Cancel"}),e.jsx(E,{type:"submit",variant:"contained",children:"Add Task"})]})]})]}),e.jsxs(de,{open:u,onClose:P,maxWidth:"md",fullWidth:!0,children:[e.jsx(he,{children:"Edit Task"}),e.jsxs(g,{component:"form",onSubmit:$,children:[e.jsxs(ue,{children:[e.jsx(q,{fullWidth:!0,label:"Task Title",name:"title",value:k.title,onChange:re,margin:"normal",required:!0,placeholder:"e.g., Brush teeth, Make bed, Eat breakfast"}),e.jsx(q,{fullWidth:!0,label:"Description (optional)",name:"description",value:k.description,onChange:re,margin:"normal",multiline:!0,rows:3,placeholder:"Additional details about this task..."}),e.jsx(x,{variant:"h6",sx:{mt:3,mb:2},children:"Task Image (optional)"}),e.jsx(q,{fullWidth:!0,type:"file",accept:"image/*",onChange:V,margin:"normal",helperText:"Upload an image for this task",InputLabelProps:{shrink:!0}}),k.image&&e.jsx(g,{sx:{mt:1},children:e.jsx("img",{src:k.image,alt:"Task image preview",style:{width:100,height:100,borderRadius:4,objectFit:"cover"}})}),e.jsx(E,{variant:"outlined",sx:{mt:2},onClick:()=>I({...k,image:"",imageFile:null}),children:"Remove Image"})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:P,children:"Cancel"}),e.jsx(E,{type:"submit",variant:"contained",children:"Update Task"})]})]})]})]}):e.jsxs(g,{children:[e.jsx(X,{severity:"error",children:"Schedule not found"}),e.jsx(E,{onClick:()=>U("/children"),sx:{mt:2},children:"Back to Children"})]})},Us=()=>{const{token:t}=wt(),[n,r]=y.useState(null),[s,i]=y.useState(!0),[a,o]=y.useState("");y.useEffect(()=>{c()},[t]);const c=async()=>{try{i(!0);const u=await B.get(`/api/children/magic/${t}`);r(u.data.child)}catch(u){console.error("Failed to fetch child data:",u),o("Unable to load schedule. Please check with your parent.")}finally{i(!1)}},j=async(u,l)=>{try{await B.put(`/api/children/magic/${t}/tasks/${u}`,{childMarkedDone:l}),c()}catch(p){console.error("Failed to update task:",p),o("Failed to update task status")}};return s?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(pe,{})}):a||!n?e.jsx(ce,{maxWidth:"md",children:e.jsxs(g,{mt:4,children:[e.jsx(X,{severity:"error",sx:{mb:3},children:a||"Schedule not found"}),e.jsx(x,{variant:"body1",color:"text.secondary",children:"Please ask your parent to check the magic link."})]})}):e.jsxs(g,{children:[e.jsx(Re,{position:"static",color:"primary",children:e.jsxs(Oe,{children:[e.jsxs(x,{variant:"h6",component:"div",sx:{flexGrow:1},children:[n.name,"'s Schedule"]}),n.avatar&&e.jsx(g,{sx:{ml:2},children:e.jsx("img",{src:n.avatar,alt:n.name,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover"}})})]})}),e.jsxs(ce,{maxWidth:"md",sx:{mt:4,mb:4},children:[e.jsxs(x,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:["Welcome, ",n.name,"!"]}),e.jsx(x,{variant:"body1",color:"text.secondary",align:"center",sx:{mb:4},children:"Tap the circle next to each task to mark it as completed!"}),e.jsxs(g,{sx:{mb:4,p:2,bgcolor:"background.paper",borderRadius:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,align:"center",children:" Your Progress"}),e.jsxs(g,{display:"flex",justifyContent:"space-around",flexWrap:"wrap",gap:2,children:[e.jsxs(g,{textAlign:"center",children:[e.jsx(x,{variant:"h4",color:"primary.main",sx:{fontWeight:"bold"},children:n.schedules.length}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"Schedules"})]}),e.jsxs(g,{textAlign:"center",children:[e.jsx(x,{variant:"h4",color:"success.main",sx:{fontWeight:"bold"},children:n.schedules.reduce((u,l)=>u+l.tasks.filter(p=>p.isCompleted).length,0)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"Tasks Done"})]}),e.jsxs(g,{textAlign:"center",children:[e.jsx(x,{variant:"h4",color:"warning.main",sx:{fontWeight:"bold"},children:n.schedules.reduce((u,l)=>u+l.tasks.filter(p=>!p.isCompleted).length,0)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"Tasks Left"})]})]})]}),a&&e.jsx(X,{severity:"error",sx:{mb:3},children:a}),n.schedules.length===0?e.jsxs(g,{textAlign:"center",py:6,children:[e.jsx(x,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No schedules yet"}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"Ask your parent to create some schedules for you!"})]}):e.jsx(L,{container:!0,spacing:3,children:n.schedules.map(u=>e.jsx(L,{item:!0,xs:12,children:e.jsx(xe,{children:e.jsxs(fe,{children:[e.jsx(g,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:e.jsxs(g,{flexGrow:1,children:[e.jsx(x,{variant:"h5",component:"h2",gutterBottom:!0,children:u.title}),u.description&&e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mb:1},children:u.description}),e.jsxs(g,{sx:{mb:1},children:[e.jsxs(x,{variant:"body2",color:"text.secondary",children:[u.tasks.filter(l=>l.isCompleted).length," / ",u.tasks.length," tasks completed"]}),e.jsx(g,{sx:{width:"100%",height:6,bgcolor:"grey.300",borderRadius:3,overflow:"hidden"},children:e.jsx(g,{sx:{width:`${u.tasks.length>0?u.tasks.filter(l=>l.isCompleted).length/u.tasks.length*100:0}%`,height:"100%",bgcolor:"success.main",transition:"width 0.3s ease"}})})]})]})}),u.tasks.filter(l=>!l.isCompleted).length===0?u.tasks.length===0?e.jsx(x,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:"No tasks in this schedule yet"}):e.jsxs(g,{textAlign:"center",py:2,children:[e.jsx(x,{variant:"body2",color:"success.main",sx:{fontWeight:"bold"},children:" All tasks completed!"}),e.jsx(x,{variant:"caption",color:"text.secondary",children:"Great job! All tasks in this schedule are done."})]}):e.jsx(L,{container:!0,spacing:2,children:u.tasks.filter(l=>!l.isCompleted).map((l,p)=>e.jsx(L,{item:!0,xs:12,sm:6,md:4,children:e.jsx(xe,{sx:{backgroundColor:l.childMarkedDone?"success.light":"background.paper",opacity:l.childMarkedDone?.9:1,cursor:"pointer",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:3},minHeight:280,display:"flex",flexDirection:"column"},onClick:()=>j(l.id,!l.childMarkedDone),children:e.jsxs(fe,{sx:{flexGrow:1,p:2,textAlign:"center"},children:[l.image?e.jsx(g,{sx:{mb:2},children:e.jsx("img",{src:l.image,alt:l.title,style:{width:120,height:120,borderRadius:8,objectFit:"cover",border:"2px solid",borderColor:l.childMarkedDone?"#4caf50":"#e0e0e0",filter:l.childMarkedDone?"grayscale(0.3) brightness(0.9)":"none"}})}):e.jsx(g,{sx:{width:120,height:120,borderRadius:8,bgcolor:"grey.200",display:"flex",alignItems:"center",justifyContent:"center",mb:2,mx:"auto",border:"2px solid",borderColor:l.childMarkedDone?"#4caf50":"#e0e0e0"},children:e.jsx(x,{variant:"h6",color:"text.secondary",children:p+1})}),e.jsx(g,{sx:{mb:2},children:e.jsx(M,{size:"large",sx:{fontSize:"3rem",color:l.childMarkedDone?"success.main":"primary.light"},children:l.childMarkedDone?e.jsx(Ge,{fontSize:"inherit"}):e.jsx(vt,{fontSize:"inherit"})})}),e.jsx(x,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:"bold",textDecoration:l.childMarkedDone?"line-through":"none",color:l.childMarkedDone?"text.secondary":"text.primary",mb:1},children:l.title}),l.description&&e.jsx(x,{variant:"body2",sx:{fontSize:"0.8rem",color:"text.secondary",opacity:.8},children:l.description}),l.childMarkedDone&&e.jsx(g,{sx:{mt:1},children:e.jsx(x,{variant:"body2",sx:{fontSize:"0.9rem",color:"success.main",fontWeight:"bold"},children:" Completed!"})})]})})},l.id))})]})})},u.id))}),e.jsx(g,{textAlign:"center",sx:{mt:6,pt:3,borderTop:1,borderColor:"divider"},children:e.jsxs(x,{variant:"body2",color:"text.secondary",children:["Made with  for ",n.name]})})]})]})},An=y.createContext(),Ye=B.create({baseURL:"/api/admin",headers:{"Content-Type":"application/json"}});Ye.interceptors.request.use(t=>{const n=localStorage.getItem("adminToken");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t));Ye.interceptors.response.use(t=>t,t=>{var n,r;return(((n=t.response)==null?void 0:n.status)===401||((r=t.response)==null?void 0:r.status)===403)&&(localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),window.location.href="/admin"),Promise.reject(t)});const Pe=()=>{const t=y.useContext(An);if(!t)throw new Error("useAdmin must be used within AdminProvider");return t},zs=({children:t})=>{const[n,r]=y.useState(null),[s,i]=y.useState(!0);y.useEffect(()=>{const j=localStorage.getItem("adminToken"),u=localStorage.getItem("adminUser");if(j&&u)try{r(JSON.parse(u))}catch(l){console.error("Error parsing admin user:",l),localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser")}i(!1)},[]);const c={admin:n,loading:s,login:async(j,u)=>{var l,p;try{const v=await Ye.post("/login",{username:j,password:u}),{token:S,admin:m}=v.data;return localStorage.setItem("adminToken",S),localStorage.setItem("adminUser",JSON.stringify(m)),r(m),{success:!0}}catch(v){return{success:!1,error:((p=(l=v.response)==null?void 0:l.data)==null?void 0:p.error)||"Login failed"}}},logout:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),r(null)},adminApi:Ye};return e.jsx(An.Provider,{value:c,children:t})},Bs=()=>{const[t,n]=y.useState({username:"",password:""}),[r,s]=y.useState(!1),[i,a]=y.useState(""),[o,c]=y.useState(!1),{admin:j,login:u}=Pe(),l=ie();y.useEffect(()=>{j&&l("/admin/dashboard")},[j,l]);const p=m=>{n({...t,[m.target.name]:m.target.value}),a("")},v=async m=>{m.preventDefault(),c(!0),a("");const f=await u(t.username,t.password);f.success?l("/admin/dashboard"):a(f.error),c(!1)},S=()=>{s(!r)};return e.jsx(ce,{maxWidth:"sm",children:e.jsx(g,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",py:4},children:e.jsxs(se,{elevation:6,sx:{p:4,width:"100%",maxWidth:400,borderRadius:2},children:[e.jsxs(g,{sx:{textAlign:"center",mb:3},children:[e.jsx($n,{sx:{fontSize:64,color:"primary.main",mb:2}}),e.jsx(x,{variant:"h4",component:"h1",gutterBottom:!0,children:"Admin Login"}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"Enter your admin credentials to access the dashboard"})]}),i&&e.jsx(X,{severity:"error",sx:{mb:2},children:i}),e.jsxs("form",{onSubmit:v,children:[e.jsx(q,{fullWidth:!0,name:"username",label:"Username",value:t.username,onChange:p,margin:"normal",required:!0,autoComplete:"username",autoFocus:!0}),e.jsx(q,{fullWidth:!0,name:"password",label:"Password",type:r?"text":"password",value:t.password,onChange:p,margin:"normal",required:!0,autoComplete:"current-password",InputProps:{endAdornment:e.jsx(Rn,{position:"end",children:e.jsx(M,{onClick:S,edge:"end",children:r?e.jsx(rr,{}):e.jsx(nr,{})})})}}),e.jsx(E,{type:"submit",fullWidth:!0,variant:"contained",disabled:o,sx:{mt:3,mb:2,py:1.5},children:o?"Logging in...":"Login"})]})]})})})},Hs=()=>{const[t,n]=y.useState(null),[r,s]=y.useState(!0),[i,a]=y.useState(""),[o,c]=y.useState(null),{admin:j,logout:u,adminApi:l}=Pe(),p=ie();y.useEffect(()=>{if(!j){p("/admin");return}v()},[j,p]);const v=async()=>{try{const b=await l.get("/stats");n(b.data.stats)}catch(b){a("Failed to load dashboard statistics"),console.error("Stats fetch error:",b)}finally{s(!1)}},S=b=>{c(b.currentTarget)},m=()=>{c(null)},f=()=>{u(),p("/admin"),m()},d=({title:b,value:R,icon:k,color:I,onClick:U})=>e.jsx(xe,{sx:{cursor:U?"pointer":"default","&:hover":U?{boxShadow:4}:{}},onClick:U,children:e.jsx(fe,{children:e.jsxs(g,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(g,{children:[e.jsx(x,{color:"text.secondary",gutterBottom:!0,variant:"h6",children:b}),e.jsx(x,{variant:"h4",component:"div",children:R})]}),e.jsx(g,{sx:{color:I,fontSize:48},children:k})]})})});return r?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(pe,{})}):e.jsxs(g,{children:[e.jsx(Re,{position:"static",children:e.jsxs(Oe,{children:[e.jsx(Kn,{sx:{mr:2}}),e.jsx(x,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Admin Dashboard"}),e.jsxs(x,{variant:"body2",sx:{mr:2},children:["Welcome, ",j==null?void 0:j.username]}),e.jsx(M,{size:"large",onClick:S,color:"inherit",children:e.jsx(Wn,{})}),e.jsx(On,{anchorEl:o,open:!!o,onClose:m,children:e.jsxs(Xt,{onClick:f,children:[e.jsx(Xn,{sx:{mr:1}}),"Logout"]})})]})}),e.jsxs(ce,{maxWidth:"lg",sx:{py:4},children:[i&&e.jsx(X,{severity:"error",sx:{mb:3},children:i}),e.jsx(x,{variant:"h4",gutterBottom:!0,children:"System Overview"}),t&&e.jsxs(L,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(L,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{title:"Users",value:t.users,icon:e.jsx(dt,{}),color:"primary.light",onClick:()=>p("/admin/users")})}),e.jsx(L,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{title:"Children",value:t.children,icon:e.jsx(Xe,{}),color:"primary.light",onClick:()=>p("/admin/children")})}),e.jsx(L,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{title:"Schedules",value:t.schedules,icon:e.jsx(Ce,{}),color:"primary.light",onClick:()=>p("/admin/schedules")})}),e.jsx(L,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{title:"Images",value:t.predefinedImages,icon:e.jsx(ct,{}),color:"primary.light",onClick:()=>p("/admin/images")})})]}),e.jsxs(se,{sx:{p:3,mb:3},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,children:"Quick Actions"}),e.jsxs(L,{container:!0,spacing:2,children:[e.jsx(L,{item:!0,children:e.jsx(E,{variant:"outlined",startIcon:e.jsx(dt,{}),onClick:()=>p("/admin/users"),children:"Manage Users"})}),e.jsx(L,{item:!0,children:e.jsx(E,{variant:"outlined",startIcon:e.jsx(Xe,{}),onClick:()=>p("/admin/children"),children:"Manage Children"})}),e.jsx(L,{item:!0,children:e.jsx(E,{variant:"outlined",startIcon:e.jsx(Ce,{}),onClick:()=>p("/admin/schedules"),children:"Manage Schedules"})}),e.jsx(L,{item:!0,children:e.jsx(E,{variant:"outlined",startIcon:e.jsx(ct,{}),onClick:()=>p("/admin/images"),children:"Manage Images"})})]})]})]})]})},_s=()=>{var f;const[t,n]=y.useState([]),[r,s]=y.useState(!0),[i,a]=y.useState(""),[o,c]=y.useState({open:!1,user:null}),{adminApi:j}=Pe(),u=ie();y.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await j.get("/users");n(d.data.users)}catch(d){a("Failed to load users"),console.error("Users fetch error:",d)}finally{s(!1)}},p=d=>{c({open:!0,user:d})},v=async()=>{try{await j.delete(`/users/${o.user.id}`),n(t.filter(d=>d.id!==o.user.id)),c({open:!1,user:null})}catch(d){a("Failed to delete user"),console.error("Delete user error:",d)}},S=()=>{c({open:!1,user:null})},m=d=>new Date(d).toLocaleDateString();return r?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(pe,{})}):e.jsxs(g,{children:[e.jsx(Re,{position:"static",children:e.jsxs(Oe,{children:[e.jsx(M,{edge:"start",color:"inherit",onClick:()=>u("/admin/dashboard"),sx:{mr:2},children:e.jsx(ve,{})}),e.jsx(dt,{sx:{mr:2}}),e.jsx(x,{variant:"h6",component:"div",children:"User Management"})]})}),e.jsxs(ce,{maxWidth:"lg",sx:{py:4},children:[i&&e.jsx(X,{severity:"error",sx:{mb:3},children:i}),e.jsxs(x,{variant:"h4",gutterBottom:!0,children:["Users (",t.length,")"]}),e.jsx(jt,{component:se,children:e.jsxs(yt,{children:[e.jsx(bt,{children:e.jsxs(Te,{children:[e.jsx(T,{children:"Name"}),e.jsx(T,{children:"Email"}),e.jsx(T,{children:"Children"}),e.jsx(T,{children:"Email Subscriptions"}),e.jsx(T,{children:"Created"}),e.jsx(T,{children:"Actions"})]})}),e.jsx(Ct,{children:t.map(d=>e.jsxs(Te,{children:[e.jsx(T,{children:d.name}),e.jsx(T,{children:d.email}),e.jsx(T,{children:e.jsx(Q,{icon:e.jsx(Xe,{}),label:d._count.children,size:"small",sx:{bgcolor:"primary.light",color:"white"}})}),e.jsx(T,{children:e.jsx(Q,{label:d.subscribeEmails?"Yes":"No",color:d.subscribeEmails?"success":"default",size:"small"})}),e.jsx(T,{children:m(d.createdAt)}),e.jsx(T,{children:e.jsx(M,{color:"error",onClick:()=>p(d),size:"small",children:e.jsx(Se,{})})})]},d.id))})]})}),t.length===0&&!r&&e.jsx(se,{sx:{p:4,textAlign:"center",mt:2},children:e.jsx(x,{color:"text.secondary",children:"No users found"})})]}),e.jsxs(de,{open:o.open,onClose:S,children:[e.jsx(he,{children:"Confirm Delete"}),e.jsxs(ue,{children:[e.jsxs(x,{children:["Are you sure you want to delete user ",e.jsx("strong",{children:(f=o.user)==null?void 0:f.name}),"?"]}),e.jsx(x,{color:"error",sx:{mt:1},children:"This will also delete all their children and schedules. This action cannot be undone."})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:S,children:"Cancel"}),e.jsx(E,{onClick:v,color:"error",variant:"contained",children:"Delete"})]})]})]})},Ws=()=>{var f;const[t,n]=y.useState([]),[r,s]=y.useState(!0),[i,a]=y.useState(""),[o,c]=y.useState({open:!1,child:null}),{adminApi:j}=Pe(),u=ie();y.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await j.get("/children");n(d.data.children)}catch(d){a("Failed to load children"),console.error("Children fetch error:",d)}finally{s(!1)}},p=d=>{c({open:!0,child:d})},v=async()=>{try{await j.delete(`/children/${o.child.id}`),n(t.filter(d=>d.id!==o.child.id)),c({open:!1,child:null})}catch(d){a("Failed to delete child"),console.error("Delete child error:",d)}},S=()=>{c({open:!1,child:null})},m=d=>new Date(d).toLocaleDateString();return r?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(pe,{})}):e.jsxs(g,{children:[e.jsx(Re,{position:"static",children:e.jsxs(Oe,{children:[e.jsx(M,{edge:"start",color:"inherit",onClick:()=>u("/admin/dashboard"),sx:{mr:2},children:e.jsx(ve,{})}),e.jsx(Xe,{sx:{mr:2}}),e.jsx(x,{variant:"h6",component:"div",children:"Children Management"})]})}),e.jsxs(ce,{maxWidth:"lg",sx:{py:4},children:[i&&e.jsx(X,{severity:"error",sx:{mb:3},children:i}),e.jsxs(x,{variant:"h4",gutterBottom:!0,children:["Children (",t.length,")"]}),e.jsx(jt,{component:se,children:e.jsxs(yt,{children:[e.jsx(bt,{children:e.jsxs(Te,{children:[e.jsx(T,{children:"Avatar"}),e.jsx(T,{children:"Name"}),e.jsx(T,{children:"Parent"}),e.jsx(T,{children:"Magic Token"}),e.jsx(T,{children:"Schedules"}),e.jsx(T,{children:"Created"}),e.jsx(T,{children:"Actions"})]})}),e.jsx(Ct,{children:t.map(d=>e.jsxs(Te,{children:[e.jsx(T,{children:d.avatar?e.jsx(Tt,{src:d.avatar,alt:d.name,sx:{width:40,height:40}}):e.jsx(Tt,{sx:{width:40,height:40},children:d.name.charAt(0)})}),e.jsxs(T,{children:[e.jsx(x,{variant:"subtitle2",children:d.name}),d.color&&e.jsx(Q,{size:"small",label:"Themed",sx:{mt:.5,bgcolor:d.color,color:"white"}})]}),e.jsxs(T,{children:[e.jsx(x,{variant:"body2",children:d.parent.name}),e.jsx(x,{variant:"caption",color:"text.secondary",children:d.parent.email})]}),e.jsx(T,{children:e.jsxs(x,{variant:"caption",sx:{fontFamily:"monospace"},children:[d.magicToken.substring(0,8),"..."]})}),e.jsx(T,{children:e.jsx(Q,{icon:e.jsx(Ce,{}),label:d._count.schedules,size:"small",sx:{bgcolor:"primary.light",color:"white"}})}),e.jsx(T,{children:m(d.createdAt)}),e.jsx(T,{children:e.jsx(M,{color:"error",onClick:()=>p(d),size:"small",children:e.jsx(Se,{})})})]},d.id))})]})}),t.length===0&&!r&&e.jsx(se,{sx:{p:4,textAlign:"center",mt:2},children:e.jsx(x,{color:"text.secondary",children:"No children found"})})]}),e.jsxs(de,{open:o.open,onClose:S,children:[e.jsx(he,{children:"Confirm Delete"}),e.jsxs(ue,{children:[e.jsxs(x,{children:["Are you sure you want to delete child ",e.jsx("strong",{children:(f=o.child)==null?void 0:f.name}),"?"]}),e.jsx(x,{color:"error",sx:{mt:1},children:"This will also delete all their schedules. This action cannot be undone."})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:S,children:"Cancel"}),e.jsx(E,{onClick:v,color:"error",variant:"contained",children:"Delete"})]})]})]})},$s=()=>{var d;const[t,n]=y.useState([]),[r,s]=y.useState(!0),[i,a]=y.useState(""),[o,c]=y.useState({open:!1,schedule:null}),{adminApi:j}=Pe(),u=ie();y.useEffect(()=>{l()},[]);const l=async()=>{try{const b=await j.get("/schedules");n(b.data.schedules)}catch(b){a("Failed to load schedules"),console.error("Schedules fetch error:",b)}finally{s(!1)}},p=b=>{c({open:!0,schedule:b})},v=async()=>{try{await j.delete(`/schedules/${o.schedule.id}`),n(t.filter(b=>b.id!==o.schedule.id)),c({open:!1,schedule:null})}catch(b){a("Failed to delete schedule"),console.error("Delete schedule error:",b)}},S=()=>{c({open:!1,schedule:null})},m=b=>new Date(b).toLocaleDateString(),f=b=>{const R=b.filter(I=>I.isCompleted).length,k=b.length;return{completed:R,total:k,percentage:k>0?(R/k*100).toFixed(0):0}};return r?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(pe,{})}):e.jsxs(g,{children:[e.jsx(Re,{position:"static",children:e.jsxs(Oe,{children:[e.jsx(M,{edge:"start",color:"inherit",onClick:()=>u("/admin/dashboard"),sx:{mr:2},children:e.jsx(ve,{})}),e.jsx(Ce,{sx:{mr:2}}),e.jsx(x,{variant:"h6",component:"div",children:"Schedule Management"})]})}),e.jsxs(ce,{maxWidth:"lg",sx:{py:4},children:[i&&e.jsx(X,{severity:"error",sx:{mb:3},children:i}),e.jsxs(x,{variant:"h4",gutterBottom:!0,children:["Schedules (",t.length,")"]}),e.jsx(jt,{component:se,children:e.jsxs(yt,{children:[e.jsx(bt,{children:e.jsxs(Te,{children:[e.jsx(T,{children:"Title"}),e.jsx(T,{children:"Child"}),e.jsx(T,{children:"Parent"}),e.jsx(T,{children:"Tasks"}),e.jsx(T,{children:"Progress"}),e.jsx(T,{children:"Status"}),e.jsx(T,{children:"Created"}),e.jsx(T,{children:"Actions"})]})}),e.jsx(Ct,{children:t.map(b=>{const R=f(b.tasks);return e.jsxs(Te,{children:[e.jsxs(T,{children:[e.jsx(x,{variant:"subtitle2",children:b.title}),b.description&&e.jsx(x,{variant:"caption",color:"text.secondary",children:b.description})]}),e.jsx(T,{children:b.child.name}),e.jsxs(T,{children:[e.jsx(x,{variant:"body2",children:b.child.parent.name}),e.jsx(x,{variant:"caption",color:"text.secondary",children:b.child.parent.email})]}),e.jsx(T,{children:e.jsx(Q,{icon:e.jsx(er,{}),label:b._count.tasks,size:"small",sx:{bgcolor:"primary.light",color:"white"}})}),e.jsx(T,{children:e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(x,{variant:"body2",children:[R.completed,"/",R.total]}),e.jsx(Q,{size:"small",label:`${R.percentage}%`,color:R.percentage==100?"success":"default"})]})}),e.jsx(T,{children:e.jsx(Q,{icon:b.isActive?e.jsx(Ge,{}):e.jsx(vt,{}),label:b.isActive?"Active":"Inactive",color:b.isActive?"success":"default",size:"small"})}),e.jsx(T,{children:m(b.createdAt)}),e.jsx(T,{children:e.jsx(M,{color:"error",onClick:()=>p(b),size:"small",children:e.jsx(Se,{})})})]},b.id)})})]})}),t.length===0&&!r&&e.jsx(se,{sx:{p:4,textAlign:"center",mt:2},children:e.jsx(x,{color:"text.secondary",children:"No schedules found"})})]}),e.jsxs(de,{open:o.open,onClose:S,children:[e.jsx(he,{children:"Confirm Delete"}),e.jsxs(ue,{children:[e.jsxs(x,{children:["Are you sure you want to delete schedule ",e.jsx("strong",{children:(d=o.schedule)==null?void 0:d.title}),"?"]}),e.jsx(x,{color:"error",sx:{mt:1},children:"This will also delete all tasks in this schedule. This action cannot be undone."})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:S,children:"Cancel"}),e.jsx(E,{onClick:v,color:"error",variant:"contained",children:"Delete"})]})]})]})},qs=()=>{var z;const[t,n]=y.useState([]),[r,s]=y.useState(!0),[i,a]=y.useState(""),[o,c]=y.useState({open:!1,image:null}),[j,u]=y.useState({open:!1,image:null}),[l,p]=y.useState({open:!1}),[v,S]=y.useState({name:"",category:"",imageData:""}),{adminApi:m}=Pe(),f=ie(),d=["general","meals","morning","bedtime","activities","hygiene","school"];y.useEffect(()=>{b()},[]);const b=async()=>{try{const w=await m.get("/predefined-images");n(w.data.images)}catch(w){a("Failed to load images"),console.error("Images fetch error:",w)}finally{s(!1)}},R=w=>{const O=w.target.files[0];if(O){if(!O.type.startsWith("image/")){a("Please select a valid image file");return}const P=new FileReader;P.onload=re=>{S(V=>({...V,imageData:re.target.result}))},P.readAsDataURL(O)}},k=()=>{S({name:"",category:"",imageData:""}),p({open:!0})},I=w=>{S({name:w.name,category:w.category,imageData:w.imageData}),u({open:!0,image:w})},U=w=>{c({open:!0,image:w})},K=async()=>{try{await m.delete(`/predefined-images/${o.image.id}`),n(t.filter(w=>w.id!==o.image.id)),c({open:!1,image:null})}catch(w){a("Failed to delete image"),console.error("Delete image error:",w)}},H=async(w=!1)=>{var O,P,re,V;try{if(!v.name||!v.category||!v.imageData){a("All fields are required");return}if(!v.name.trim()){a("Image name cannot be empty");return}if(a(""),w){const $=await m.put(`/predefined-images/${j.image.id}`,v);n(t.map(J=>J.id===j.image.id?$.data.image:J)),u({open:!1,image:null})}else{const $=await m.post("/predefined-images",v);n([...t,$.data.image]),p({open:!1})}S({name:"",category:"",imageData:""})}catch($){console.error("Save image error:",$);const J=((P=(O=$.response)==null?void 0:O.data)==null?void 0:P.error)||((V=(re=$.response)==null?void 0:re.data)==null?void 0:V.message)||"Failed to save image. Please try again.";a(J)}},Z=()=>{c({open:!1,image:null}),u({open:!1,image:null}),p({open:!1}),S({name:"",category:"",imageData:""})},W=t.reduce((w,O)=>(w[O.category]||(w[O.category]=[]),w[O.category].push(O),w),{});if(r)return e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(pe,{})});const A=({open:w,onClose:O,onSave:P,title:re,isEdit:V})=>e.jsxs(de,{open:w,onClose:O,maxWidth:"md",fullWidth:!0,children:[e.jsx(he,{children:re}),e.jsx(ue,{children:e.jsxs(L,{container:!0,spacing:2,sx:{mt:1},children:[e.jsxs(L,{item:!0,xs:12,md:6,children:[e.jsx(q,{fullWidth:!0,label:"Image Name",value:v.name,onChange:$=>S(J=>({...J,name:$.target.value})),margin:"normal",autoFocus:!0},`name-${w?"open":"closed"}`),e.jsxs(Pn,{fullWidth:!0,margin:"normal",children:[e.jsx(Ln,{children:"Category"}),e.jsx(Mn,{value:v.category,onChange:$=>S(J=>({...J,category:$.target.value})),label:"Category",children:d.map($=>e.jsx(Xt,{value:$,children:$.charAt(0).toUpperCase()+$.slice(1)},$))})]}),e.jsxs(E,{variant:"outlined",component:"label",startIcon:e.jsx(Jn,{}),fullWidth:!0,sx:{mt:2},children:["Upload Image",e.jsx("input",{type:"file",accept:"image/*",onChange:R,hidden:!0})]})]}),e.jsx(L,{item:!0,xs:12,md:6,children:v.imageData&&e.jsxs(g,{sx:{textAlign:"center"},children:[e.jsx(x,{variant:"subtitle2",gutterBottom:!0,children:"Preview:"}),e.jsx("img",{src:v.imageData,alt:"Preview",style:{maxWidth:"100%",maxHeight:200,objectFit:"contain",border:"1px solid #ddd",borderRadius:8}})]})})]})}),e.jsxs(me,{children:[e.jsx(E,{onClick:O,children:"Cancel"}),e.jsx(E,{onClick:()=>P(V),variant:"contained",children:V?"Update":"Add"})]})]});return e.jsxs(g,{children:[e.jsx(Re,{position:"static",children:e.jsxs(Oe,{children:[e.jsx(M,{edge:"start",color:"inherit",onClick:()=>f("/admin/dashboard"),sx:{mr:2},children:e.jsx(ve,{})}),e.jsx(ct,{sx:{mr:2}}),e.jsx(x,{variant:"h6",component:"div",children:"Image Management"})]})}),e.jsxs(ce,{maxWidth:"lg",sx:{py:4},children:[i&&e.jsx(X,{severity:"error",sx:{mb:3},onClose:()=>a(""),children:i}),e.jsxs(x,{variant:"h4",gutterBottom:!0,children:["Predefined Images (",t.length,")"]}),Object.entries(W).map(([w,O])=>e.jsxs(se,{sx:{p:3,mb:3},children:[e.jsxs(x,{variant:"h5",gutterBottom:!0,children:[w.charAt(0).toUpperCase()+w.slice(1),e.jsx(Q,{label:O.length,size:"small",sx:{ml:1,bgcolor:"primary.light",color:"white"}})]}),e.jsx(L,{container:!0,spacing:2,children:O.map(P=>e.jsx(L,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(xe,{children:[e.jsx(Fn,{component:"img",height:"120",image:P.imageData,alt:P.name,sx:{objectFit:"contain",bgcolor:"#f5f5f5"}}),e.jsxs(fe,{sx:{p:1.5},children:[e.jsx(x,{variant:"subtitle2",noWrap:!0,children:P.name}),e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[e.jsx(M,{size:"small",onClick:()=>I(P),sx:{color:"primary.light"},children:e.jsx(Ze,{})}),e.jsx(M,{size:"small",onClick:()=>U(P),color:"error",children:e.jsx(Se,{})})]})]})]})},P.id))})]},w)),t.length===0&&!r&&e.jsx(se,{sx:{p:4,textAlign:"center"},children:e.jsx(x,{color:"text.secondary",children:"No images found. Add some predefined images to get started."})})]}),e.jsx(In,{onClick:k,sx:{position:"fixed",bottom:16,right:16,bgcolor:"primary.light",color:"white","&:hover":{bgcolor:"primary.main"}},children:e.jsx(ge,{})}),e.jsx(A,{open:l.open,onClose:Z,onSave:H,title:"Add Predefined Image",isEdit:!1}),e.jsx(A,{open:j.open,onClose:Z,onSave:H,title:"Edit Predefined Image",isEdit:!0}),e.jsxs(de,{open:o.open,onClose:Z,children:[e.jsx(he,{children:"Confirm Delete"}),e.jsxs(ue,{children:[e.jsxs(x,{children:["Are you sure you want to delete the image ",e.jsx("strong",{children:(z=o.image)==null?void 0:z.name}),"?"]}),e.jsx(x,{color:"error",sx:{mt:1},children:"This action cannot be undone."})]}),e.jsxs(me,{children:[e.jsx(E,{onClick:Z,children:"Cancel"}),e.jsx(E,{onClick:K,color:"error",variant:"contained",children:"Delete"})]})]})]})},En=y.createContext(),Vs=Qt({palette:{mode:"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5",paper:"#ffffff"}}}),Js=Qt({palette:{mode:"dark",primary:{main:"#90caf9",light:"#1a237e",dark:"#42a5f5",contrastText:"#ffffff"},secondary:{main:"#f48fb1",light:"#ad1457",dark:"#e91e63"},success:{main:"#4caf50",light:"#1b5e20",dark:"#66bb6a",contrastText:"#ffffff"},warning:{main:"#ff9800",light:"#e65100",dark:"#ffb74d"},error:{main:"#f44336",light:"#b71c1c",dark:"#ef5350"},background:{default:"#121212",paper:"#1e1e1e"},text:{primary:"#ffffff",secondary:"rgba(255, 255, 255, 0.7)"}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}},MuiCard:{styleOverrides:{root:{backgroundColor:"#1e1e1e",border:"1px solid rgba(255, 255, 255, 0.12)"}}}}}),Ks=()=>{const t=y.useContext(En);if(!t)throw new Error("useTheme must be used within a ThemeProviderWrapper");return t},Gs=({children:t})=>{const[n,r]=y.useState(()=>{const o=localStorage.getItem("darkMode");return o!==null?JSON.parse(o):!0});y.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(n))},[n]);const s=()=>{r(!n)},i=n?Js:Vs,a={isDarkMode:n,toggleTheme:s,theme:i};return e.jsx(En.Provider,{value:a,children:e.jsxs(Nn,{theme:i,children:[e.jsx(Un,{}),t]})})};function Xs(){const{user:t}=We(),{isDarkMode:n,toggleTheme:r}=Ks();return e.jsxs(g,{sx:{position:"relative",minHeight:"100vh"},children:[e.jsx(g,{sx:{position:"fixed",top:16,right:16,zIndex:1e3},children:e.jsx(Ee,{title:`Switch to ${n?"light":"dark"} mode`,children:e.jsx(M,{onClick:r,sx:{bgcolor:"background.paper",boxShadow:2,"&:hover":{bgcolor:"background.paper",boxShadow:3}},children:n?e.jsx(Vn,{}):e.jsx(qn,{})})})}),e.jsxs(Bn,{children:[e.jsx(ne,{path:"/login",element:t?e.jsx(Ae,{to:"/dashboard",replace:!0}):e.jsx(Is,{})}),e.jsx(ne,{path:"/dashboard",element:t?e.jsx(Ps,{}):e.jsx(Ae,{to:"/login",replace:!0})}),e.jsx(ne,{path:"/children",element:t?e.jsx(Ls,{}):e.jsx(Ae,{to:"/login",replace:!0})}),e.jsx(ne,{path:"/children/:id",element:t?e.jsx(Ms,{}):e.jsx(Ae,{to:"/login",replace:!0})}),e.jsx(ne,{path:"/schedules/:id",element:t?e.jsx(Ns,{}):e.jsx(Ae,{to:"/login",replace:!0})}),e.jsx(ne,{path:"/child/:token",element:e.jsx(Us,{})}),e.jsx(ne,{path:"/admin",element:e.jsx(Bs,{})}),e.jsx(ne,{path:"/admin/dashboard",element:e.jsx(Hs,{})}),e.jsx(ne,{path:"/admin/users",element:e.jsx(_s,{})}),e.jsx(ne,{path:"/admin/children",element:e.jsx(Ws,{})}),e.jsx(ne,{path:"/admin/schedules",element:e.jsx($s,{})}),e.jsx(ne,{path:"/admin/images",element:e.jsx(qs,{})}),e.jsx(ne,{path:"/",element:e.jsx(Ae,{to:"/dashboard",replace:!0})})]})]})}function Qs(){return e.jsx(Gs,{children:e.jsx(Fs,{children:e.jsx(zs,{children:e.jsx(ce,{maxWidth:"lg",sx:{py:2},children:e.jsx(Xs,{})})})})})}lt.createRoot(document.getElementById("root")).render(e.jsx(Hn.StrictMode,{children:e.jsx(_n,{children:e.jsx(Qs,{})})}));
//# sourceMappingURL=main-D6WORyAZ.js.map
